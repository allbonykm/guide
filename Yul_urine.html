<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìœ¨ì´ì˜ ì—¬í–‰ì‹œë¦¬ì¦ˆ: ìœ¨ì´ì˜ ê³¼í•™ì—¬í–‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #fff7ed; overflow: hidden; touch-action: manipulation; }
        .font-comic { font-family: 'Jua', sans-serif; }
        @keyframes float { 0% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-5px) rotate(5deg); } 100% { transform: translateY(0px) rotate(0deg); } }
        .btn-theme { animation: float 2.5s infinite ease-in-out; cursor: pointer; transition: all 0.2s; }
        .btn-theme:active { transform: scale(0.9); }
        .text-box { background-color: rgba(255, 255, 255, 0.98); border-radius: 20px 20px 0 0; box-shadow: 0 -4px 15px rgba(0,0,0,0.1); }
        .img-container { width: 100%; height: 100%; background-color: #fef3c7; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .img-cover { width: 100%; height: 100%; object-fit: cover; }
        .img-fit { width: 100%; height: 100%; object-fit: contain; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        /* ëŒ€ì‚¬ ê°„ê²© ì¡°ì • */
        .dialogue-box p { margin-bottom: 0.5rem; }
        .scene-divider { text-align: center; color: #cbd5e1; margin: 1rem 0; font-size: 0.8rem; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col justify-center items-center">
    <div id="app" class="w-full h-full max-w-md bg-white relative shadow-2xl overflow-hidden flex flex-col border-x border-orange-100"></div>
    <script>
        // *** AI ë°ì´í„° ìƒì„± ì˜ì—­ ***
        // ì´ë¯¸ì§€ í‚¤ì›Œë“œ: images/urine
        const storyData = [
            {
                type: 'cover',
                image: 'images/urine0.jpg',
                title: 'ìœ¨ì´ì˜ ê³¼í•™ì—¬í–‰',
                sub: 'ì•„ë¹ , ì™œ ì¶”ìš¸ ë•Œ ì˜¤ì¤Œì´ ë” ë§ˆë ¤ì›Œ?'
            },
            {
                type: 'intro',
                image: 'images/urine1.jpg',
                title: 'ë“±ì¥ì¸ë¬¼ ì†Œê°œ',
                sub: 'ì´ë²ˆ ì—¬í–‰ì„ í•¨ê»˜í•  ì¹œêµ¬ë“¤ì´ì—ìš”!',
                content: `
                    <div class="space-y-3">
                        <p><strong class="text-sky-500 text-lg">ì¡°ìœ¨</strong><br>ì²­ê³¡ì´ˆ 1í•™ë…„ 5ë°˜, ëˆˆë†€ì´ë¥¼ ì¢‹ì•„í•˜ëŠ” ë©‹ì§„ ì†Œë…€. ê¶ê¸ˆí•œ ê±´ ëª» ì°¸ëŠ” í˜¸ê¸°ì‹¬ ëŒ€ì¥.</p>
                        <p><strong class="text-pink-500 text-lg">í† í† </strong><br>ìœ¨ì´ì˜ ì• ì°© í† ë¼ ì¸í˜•. ì²™ì²™ë°•ì‚¬ ë§íˆ¬ë¡œ ìœ¨ì´ì˜ ê¶ê¸ˆì¦ì„ í•´ê²°í•´ ì¤€ë‹¤.</p>
                        <p><strong class="text-green-600 text-lg">ë°±í•©</strong><br>ìœ¨ì´ì˜ ë°˜ë ¤ ë„ë§ˆë±€. ê¼¬ë¦¬ê°€ ë°ì•„ì§€ë©´ ì‹ ë¹„í•œ ëŠ¥ë ¥ì´ ë‚˜íƒ€ë‚œë‹¤.</p>
                        <p><strong class="text-blue-600 text-lg">ì¡°ë“</strong><br>'ì†Œë“(Sodium)â€™ìœ¼ë¡œ ë³€ì‹ í•œ ì¡°ìœ¨. ë¬¼ë°©ìš¸ ì¹œêµ¬ë“¤ì„ ëª°ê³  ë‹¤ë‹Œë‹¤.</p>
                    </div>
                `
            },
            // ì œ1ì¥
            {
                type: 'story',
                image: 'images/urine2.jpg',
                title: 'ì œ1ì¥. ëˆˆë†€ì´ë§Œ í•˜ë©´ í™”ì¥ì‹¤ ìƒê°ì´ ë‚˜!',
                sub: 'ì¶”ìœ„ì™€ ì €ì˜¨ ì´ë‡¨ í˜„ìƒì˜ ë¹„ë°€',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-sky-500">ìœ¨</strong>: ìœ¼ìœ¼~ ì† ì‹œë ¤! ê·¸ë˜ë„ ëˆˆì˜¤ë¦¬ 100ë§ˆë¦¬ëŠ” ë§Œë“¤ê³  ê°ˆ ê±°ì•¼!</p>
                        <p><strong class="text-pink-500">í† í† </strong>: ìœ¨ì•„, ì…ìˆ ì´ íŒŒë˜ì¡Œì–´. ë„ˆë¬´ ì¶”ìš´ë°?</p>
                        
                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-sky-500">ìœ¨</strong>: ì•„ì‰, ì•ˆ ë¼! ë°©ê¸ˆ ì „ì— í™”ì¥ì‹¤ ë‹¤ë…€ì™”ë‹¨ ë§ì´ì•¼. ì™œ ìê¾¸ ì‰¬ê°€ ë§ˆë µì§€?</p>
                        <p><strong class="text-pink-500">í† í† </strong>: íìŒ, ê·¸ê±´ ë°”ë¡œ 'ì¶”ìœ„' ë•Œë¬¸ì´ì•¼! ìš°ë¦¬ ëª¸ì´ ì¶”ìœ„ë¥¼ ì´ê¸°ë ¤ê³  íŠ¹ë³„í•œ ì‘ì „ì„ í¼ì¹˜ê³  ìˆê±°ë“ .</p>

                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-pink-500">í† í† </strong>: ê¶ê¸ˆí•˜ë©´ ì§ì ‘ ë“¤ì–´ê°€ ë³´ì! ì–!</p>
                        <p><strong class="text-sky-500">ìœ¨(ì¡°ë“)</strong>: ìš°ì™€! ë‚´ê°€ ë™ê¸€ë™ê¸€í•´ì¡Œì–´! ë¬¼ë°©ìš¸ ì¹œêµ¬ë“¤ì´ ë‚˜í•œí…Œ ë§‰ ë¶™ëŠ”ë°?</p>
                        <p><strong class="text-pink-500">í† í† </strong>: ìš°ë¦° ì´ì œ ëª¸ì† ë¬¼ì„ ì¡°ì ˆí•˜ëŠ” 'ì¡°ë“'ì´ ëœ ê±°ì•¼. ì¶œë°œ!</p>
                    </div>
                `
            },
            // ì œ2ì¥
            {
                type: 'story',
                image: 'images/urine3.jpg',
                title: 'ì œ2ì¥. ì°½ë¬¸ì„ ë‹«ì•„ë¼! ê½‰! (í˜ˆê´€ ìˆ˜ì¶•)',
                sub: 'ì¶”ìœ„ì— ë°˜ì‘í•˜ëŠ” ìš°ë¦¬ ëª¸',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-red-500">í˜ˆê´€ ë²½</strong>: ë¹„ìƒ! ë¹„ìƒ! ë°–ì´ ë„ˆë¬´ ì¶”ì›Œ! ì†Œì¤‘í•œ ì—´ê¸°ë¥¼ ëºê¸°ë©´ ì•ˆ ë¼!</p>
                        <p><strong class="text-sky-500">ìœ¨(ì¡°ë“)</strong>: ìœ¼ì•…! ì§€ì§„ì´ ë‚¬ë‚˜? ë²½ì´ ì™œ ì´ë˜?</p>
                        
                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-pink-500">í† í† </strong>: ìš°ë¦¬ ëª¸ì´ ì²´ì˜¨ì„ ì§€í‚¤ë ¤ê³  ì°½ë¬¸ì„ ë‹«ë“¯ì´ í˜ˆê´€ì„ ê½‰ ì¡°ì´ëŠ” ê±°ì•¼!</p>
                        <p><strong class="text-red-400">ì í˜ˆêµ¬</strong>: ì•„ì´ê³  ì¢ì•„! ì—¬ê¸´ ë” ì´ìƒ ëª» ìˆê² ì–´. ì•ˆìª½ìœ¼ë¡œ ë„ë§ê°€ì!</p>

                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-sky-500">ìœ¨(ì¡°ë“)</strong>: ìš°ì™€ì•™! ì–´ë””ë¡œ ê°€ëŠ” ê±°ì•¼?</p>
                        <p><strong class="text-pink-500">í† í† </strong>: í”¼ë¶€ ìª½ ê¸¸ì´ ì¢ì•„ì ¸ì„œ, ë„“ê³  ë”°ëœ»í•œ ëª¸ í•œê°€ìš´ë°ë¡œ í”¼ì‹ í•˜ëŠ” ê±°ì•¼!</p>
                    </div>
                `
            },
            // ì œ3ì¥
            {
                type: 'story',
                image: 'images/urine4.jpg',
                title: 'ì œ3ì¥. ê±°ì‹¤ì´ í„°ì§ˆ ê²ƒ ê°™ì•„!',
                sub: 'ëª¸ì˜ ì¤‘ì‹¬ìœ¼ë¡œ ëª°ë¦° í”¼',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-sky-500">ìœ¨(ì¡°ë“)</strong>: (ë³¼ì´ ëˆŒë¦° ì±„) ë”°ëœ»í•˜ê¸´ í•œë°... ë„ˆë¬´ ì¢ì•„! ìˆ¨ ë§‰í˜€!</p>
                        <p><strong class="text-blue-400">ë¬¼ë°©ìš¸</strong>: ë°€ì§€ ë§ˆì„¸ìš”! ë‚´ ìë¦¬ë¼ê³ ìš”!</p>

                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-red-600">ì‹¬ì¥ ëŒ€ì¥</strong>: ì´ëŸ°! í”¼ê°€ ë„ˆë¬´ ë§ì´ ëª°ë ¸ì–´! í˜ˆì••ì´ ë„ˆë¬´ ë†’ì•„! ì´ëŸ¬ë‹¤ê°„ ëª¸ì´ ìœ„í—˜í•´!</p>
                        <p><strong class="text-pink-500">í† í† </strong>: í”¼ë¶€ ìª½ì— ìˆë˜ í”¼ë“¤ì´ ë‹¤ ì´ë¦¬ë¡œ ì™€ì„œ 'í™ìˆ˜'ê°€ ë‚œ ê±°ì•¼!</p>
                    </div>
                `
            },
            // ì œ4ì¥
            {
                type: 'story',
                image: 'images/urine5.jpg',
                title: 'ì œ4ì¥. ë¬¼ì„ ë°–ìœ¼ë¡œ ë²„ë ¤ë¼!',
                sub: 'ì½©íŒ¥ì˜ ê¸´ê¸‰ ì‘ì „',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-orange-600">ì½©íŒ¥ ì•„ì €ì”¨</strong>: ì–´í—ˆ, ì••ë ¥ì´ ë„ˆë¬´ ë†’ì•„! ë°©ì´ í„°ì§€ê¸° ì „ì— ë¬¼ì„ ë°–ìœ¼ë¡œ í¼ë‚´ì•¼ê² ì–´!</p>
                        <p><strong class="text-sky-500">ìœ¨(ì¡°ë“)</strong>: ë„¤? ì €í¬ëŠ” ì«“ê²¨ë‚˜ëŠ” ê±°ì˜ˆìš”?</p>
                        
                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-pink-500">í† í† </strong>: ì«“ê²¨ë‚˜ëŠ” ê²Œ ì•„ë‹ˆì•¼! ëª¸ì˜ ì••ë ¥ì„ ë‚®ì¶°ì„œ ì•ˆì „í•˜ê²Œ ì§€í‚¤ë ¤ëŠ” 'ë˜‘ë˜‘í•œ ì‘ì „'ì´ì§€!</p>
                        <p><strong class="text-orange-600">ì½©íŒ¥ ì•„ì €ì”¨</strong>: ë¯¸ì•ˆí•˜ì§€ë§Œ ìë„¤ë“¤ì´ ë‚˜ê°€ì¤˜ì•¼ ìš°ë¦¬ ëª¸ì´ í¸ì•ˆí•´ì§„ë‹¤ë„¤~ ì˜ ê°€ê²Œ!</p>

                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-pink-500">í† í† </strong>: ë³´ì´ì§€? ë‚ ì´ ì¶”ì›Œì„œ ë•€êµ¬ë© ë¬¸ë„ ë‹«í˜”ì–´. ë‚˜ê°ˆ ê³³ì€ ì´ ì˜¤ì¤Œ ë¯¸ë„ëŸ¼í‹€ë¿ì´ì•¼!</p>
                        <p><strong class="text-sky-500">ìœ¨(ì¡°ë“)</strong>: ê·¸ë ‡êµ¬ë‚˜! ë¬¼ì´ ë‚˜ê°ˆ ê³³ì´ ì—¬ê¸°ë°–ì— ì—†ì–´ì„œ ì–‘ì´ ë” ë§ì•„ì¡Œêµ¬ë‚˜! ì•¼í˜¸~ ì‹ ë‚œë‹¤!</p>
                    </div>
                `
            },
            // ì œ5ì¥
            {
                type: 'story',
                image: 'images/urine6.jpg',
                title: 'ì œ5ì¥. ì„ë¬´ ì™„ë£Œ, í™”ì¥ì‹¤ íƒˆì¶œ!',
                sub: '',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-yellow-500">ë°©ê´‘</strong>: ë”°ë¥´ë¦‰! ë‡Œì•¼! ì¶”ì›Œì„œ ë¬¼ì„ ëºë”ë‹ˆ ë¬¼íƒ±í¬ê°€ ê½‰ ì°¼ì–´! ì´ì œ ëª» ì°¸ì•„!</p>
                        <p><strong class="text-sky-500">ìœ¨(ì¡°ë“)</strong>: ìš°ì™€, ì—¬ê¸° ì§„ì§œ ê½‰ ì°¼ë„¤! ë¹¨ë¦¬ ë‚˜ê°€ê³  ì‹¶ì–´!</p>
                        
                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-sky-500">ìœ¨</strong>: (ì•„ì£¼ ì‹œì›í•œ í‘œì •ìœ¼ë¡œ) í•˜ì•„~ ì´ì œ ì‚´ê² ë‹¤!</p>
                        <p><strong class="text-pink-500">í† í† </strong>: ì–´ë•Œ? ì´ì œ ì™œ ì¶”ìš¸ ë•Œ ì˜¤ì¤Œì´ ë§ˆë ¤ìš´ì§€ ì•Œê² ì§€?</p>

                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-sky-500">ìœ¨</strong>: ë‚´ ëª¸ì´ ì•ˆ í„°ì§€ê²Œ ìŠ¤ìŠ¤ë¡œ ë¬¼ì„ ë¹¼ì¤€ ê±°ì˜€ì–´! ë‚´ ëª¸ì•„, ê³ ë§ˆì›Œ! ë„Œ ì°¸ ë˜‘ë˜‘í•˜êµ¬ë‚˜?</p>
                    </div>
                `
            },
            // í€´ì¦ˆ ì¸íŠ¸ë¡œ
            {
                type: 'quiz_intro',
                image: 'images/urine7.jpg',
                title: 'ìœ¨ì´ì˜ í€´ì¦ˆ íƒ€ì„!',
                sub: 'ë°°ìš´ ë‚´ìš©ì„ í€´ì¦ˆë¡œ í™•ì¸í•´ë³¼ê¹Œìš”?',
                content: '<p class="text-center text-lg mt-4">ìœ¨ì´ì™€ í† í† ê°€ ì•Œë ¤ì¤€ ë¹„ë°€ì„<br>ì˜ ê¸°ì–µí•˜ê³  ìˆë‚˜ìš”?<br><br><strong>OX í€´ì¦ˆ 3ë¬¸ì œ</strong>ê°€ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”!<br>ì¤€ë¹„í•˜ì‹œê³ ~ ì˜ì„¸ìš”! ğŸš½âœ¨</p>'
            },
            // ì—”ë”©
            {
                type: 'ending',
                image: 'images/urine8.jpg',
                title: 'ë',
                sub: ''
            }
        ];

        const quizData = [
            {
                question: "ì¶”ìš´ ê³³ì— ê°€ë©´ ìš°ë¦¬ ëª¸ì€ ë”°ëœ»í•œ ì—´ê¸°ë¥¼ ëºê¸°ì§€ ì•Šìœ¼ë ¤ê³  í˜ˆê´€ì„ ì¢ê²Œ ë§Œë“¤ê¹Œ?",
                answer: true,
                explanation: "ì¶”ìš°ë©´ ì°½ë¬¸ì„ ë‹«ë“¯ì´ ê²‰ì— ìˆëŠ” í˜ˆê´€ì„ ê½‰ ë‹«ì•„ì„œ(ìˆ˜ì¶•) ì—´ì´ ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” ê±¸ ë§‰ì•„ì£¼ëŠ” ê±°ì•¼."
            },
            {
                question: "ì¶”ìš¸ ë•Œ í™”ì¥ì‹¤ì„ ìì£¼ ê°€ëŠ” ê±´ ëª¸ì´ ì–´ë””ê°€ ì•„íŒŒì„œ ê·¸ëŸ° ê±¸ê¹Œ?",
                answer: false,
                explanation: "ì ˆëŒ€ ì•„í”ˆ ê²Œ ì•„ë‹ˆì•¼. ì¢ì•„ì§„ í˜ˆê´€ ë•Œë¬¸ì— ë†’ì•„ì§„ ëª¸ì† ì••ë ¥ì„ ë‚®ì¶”ë ¤ê³  ìŠ¤ìŠ¤ë¡œ ì¡°ì ˆí•˜ëŠ” ì•„ì£¼ ê±´ê°•í•œ ë°˜ì‘ì´ë€ë‹¤!"
            },
            {
                question: "ì½©íŒ¥ ì•„ì €ì”¨ëŠ” ëª¸ì†ì´ ë¬¼ë¡œ ê½‰ ì°¨ì„œ í„°ì§€ì§€ ì•Šê²Œ ì˜¤ì¤Œìœ¼ë¡œ ë¬¼ì„ ë‚´ë³´ë‚´ëŠ” ê±¸ê¹Œ?",
                answer: true,
                explanation: "í˜ˆê´€ì´ ì¢ì•„ì ¸ì„œ ëª¸ ê°€ìš´ë°ë¡œ í”¼ê°€ ëª°ë¦¬ë©´ ê½‰ ë¼ê²Œ ë˜ê±°ë“ . ê·¸ë˜ì„œ ì½©íŒ¥ ì•„ì €ì”¨ê°€ ë¬¼ì„ ë°–ìœ¼ë¡œ ë¹¼ì„œ ëª¸ì„ í¸ì•ˆí•˜ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ê±°ì•¼."
            }
        ];
        
        const THEME_EMOJI = "ğŸš½"; 

        // --- ë¡œì§ ìˆ˜ì • ---
        // inQuiz ìƒíƒœë¥¼ ì¶”ê°€í•˜ì—¬ í€´ì¦ˆ ëª¨ë“œì™€ ìŠ¤í† ë¦¬ ëª¨ë“œë¥¼ ë¶„ë¦¬
        let currentState = { pageIndex: 0, quizIndex: 0, quizStatus: 'question', lastAnswer: null, inQuiz: false };
        const app = document.getElementById('app');

        function render() {
            app.innerHTML = ''; 
            
            // 1ìˆœìœ„: í€´ì¦ˆ ëª¨ë“œì¼ ê²½ìš° í€´ì¦ˆ ë Œë”ë§
            if (currentState.inQuiz) {
                renderQuiz();
                return;
            }

            // 2ìˆœìœ„: ìŠ¤í† ë¦¬ í˜ì´ì§€ (í‘œì§€, ë³¸ë¬¸, í€´ì¦ˆì¸íŠ¸ë¡œ, ì—”ë”©)
            if (currentState.pageIndex < storyData.length) {
                const page = storyData[currentState.pageIndex];
                if (page.type === 'cover') renderCover(page);
                else if (page.type === 'ending') renderEnding(page);
                else renderStoryPage(page, page.type === 'quiz_intro');
            } 
        }

        function renderCover(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = nextPage;
            div.innerHTML = `
                <div class="img-container"><img src="${data.image}" class="img-cover" alt="í‘œì§€" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-500\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'"></div>
                <div class="absolute bottom-10 w-full text-center text-white font-comic animate-pulse text-xl drop-shadow-md bg-black/20 py-2">í™”ë©´ì„ íƒ­í•˜ì—¬ ì‹œì‘í•˜ê¸°</div>
            `;
            app.appendChild(div);
        }

        // ì—”ë”© í˜ì´ì§€: í‘œì§€ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ í´ë¦­ ì‹œ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°
        function renderEnding(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = restart;
            div.innerHTML = `
                <div class="img-container"><img src="${data.image}" class="img-cover" alt="ì—”ë”©" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-500\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'"></div>
                <div class="absolute bottom-10 w-full text-center text-white font-comic animate-pulse text-xl drop-shadow-md bg-black/20 py-2">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸° ğŸ”„</div>
            `;
            app.appendChild(div);
        }

        function renderStoryPage(data, isQuizIntro) {
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-white fade-in";
            const imgHtml = `<div class="flex-1 img-container relative border-b-4 border-orange-200"><img src="${data.image}" class="img-fit" alt="ì‚½í™”" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-400\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'"></div>`;
            
            const textHtml = `
                <div class="h-[33%] flex flex-col relative">
                    <div class="flex-1 p-6 overflow-y-auto text-box -mt-6 z-10 text-lg leading-relaxed text-gray-800">
                        ${data.title ? `<h2 class="font-comic text-2xl text-orange-500 mb-1">${data.title}</h2>` : ''}
                        ${data.sub ? `<p class="text-sm text-gray-500 mb-4">${data.sub}</p>` : ''}
                        <div class="space-y-2">${data.content}</div>
                    </div>
                    <div class="h-20 bg-white flex justify-between items-center px-8 border-t border-orange-100 z-20">
                        <div onclick="prevPage()" class="flex flex-col items-center cursor-pointer text-gray-400 hover:text-gray-600 transition"><span class="text-2xl opacity-60">âª</span><span class="text-xs font-bold mt-1">ì´ì „</span></div>
                        ${isQuizIntro ? 
                            `<div onclick="startQuiz()" class="cursor-pointer text-pink-500 flex flex-col items-center"><div class="w-14 h-14 bg-pink-500 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-pink-200">?</div><span class="text-xs font-bold mt-1">í€´ì¦ˆ í’€ê¸°!</span></div>` : 
                            `<div onclick="nextPage()" class="btn-theme flex flex-col items-center text-blue-500"><span class="text-4xl filter drop-shadow-md">${THEME_EMOJI}</span><span class="text-xs font-bold mt-1 text-blue-600">ë‹¤ìŒ</span></div>`
                        }
                    </div>
                </div>
            `;
            div.innerHTML = imgHtml + textHtml;
            app.appendChild(div);
        }

        function renderQuiz() {
            // í€´ì¦ˆê°€ ëª¨ë‘ ëë‚¬ì„ ë•Œ ì²˜ë¦¬
            if (currentState.quizIndex >= quizData.length) { 
                currentState.inQuiz = false; // í€´ì¦ˆ ëª¨ë“œ ì¢…ë£Œ
                currentState.pageIndex++;    // ë‹¤ìŒ í˜ì´ì§€(ì—”ë”©)ë¡œ ì´ë™
                render(); 
                return; 
            }

            const currentQ = quizData[currentState.quizIndex];
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-yellow-50 fade-in";
            
            if (currentState.quizStatus === 'question') {
                div.innerHTML = `<div class="flex-1 flex flex-col items-center justify-center p-6 text-center"><span class="text-pink-500 font-bold text-xl mb-4 bg-pink-100 px-4 py-1 rounded-full">ë¬¸ì œ ${currentState.quizIndex + 1} / 3</span><div class="bg-white p-8 rounded-2xl shadow-xl w-full mb-8 border-2 border-yellow-300"><p class="text-2xl font-bold break-keep text-gray-800">${currentQ.question}</p></div><div class="flex gap-6 justify-center"><button onclick="checkAnswer(true)" class="w-24 h-24 bg-blue-500 rounded-full text-white text-5xl font-black shadow-lg">O</button><button onclick="checkAnswer(false)" class="w-24 h-24 bg-red-500 rounded-full text-white text-5xl font-black shadow-lg">X</button></div></div>`;
            } else if (currentState.quizStatus === 'result') {
                const isCorrect = currentState.lastAnswer === currentQ.answer;
                const emoji = isCorrect ? `ğŸ‰${THEME_EMOJI}ğŸ‰` : 'ğŸ¤”ğŸ’¦';
                div.innerHTML = `<div class="w-full h-full ${isCorrect ? 'bg-green-500' : 'bg-orange-400'} flex flex-col items-center justify-center text-white cursor-pointer" onclick="showExplanation()"><div class="text-8xl mb-6 animate-bounce">${emoji}</div><h2 class="text-4xl font-comic mb-4">${isCorrect ? 'ì •ë‹µ!' : 'ë•¡!'}</h2><p class="animate-pulse">íƒ­í•˜ì—¬ í•´ì„¤ ë³´ê¸°</p></div>`;
            } else if (currentState.quizStatus === 'explanation') {
                const isLast = currentState.quizIndex === quizData.length - 1;
                div.innerHTML = `<div class="flex-1 flex flex-col p-6 bg-white cursor-pointer" onclick="nextQuizStep()"><div class="flex-1 flex flex-col justify-center items-center"><h3 class="text-2xl font-comic text-sky-600 mb-6">ğŸ‘§ğŸ» ìœ¨ì´ì˜ ì„¤ëª…</h3><div class="bg-sky-50 p-6 rounded-xl border-2 border-sky-200 shadow-md relative"><div class="absolute -top-4 -left-2 text-4xl">ğŸ’¡</div><p class="text-xl font-medium text-gray-800 leading-relaxed word-keep">"${currentQ.explanation}"</p></div></div><div class="h-24 flex items-center justify-center"><div class="btn-theme flex flex-col items-center"><span class="text-4xl">${THEME_EMOJI}</span><span class="text-sm font-bold text-blue-600 mt-1">${isLast ? "ì™„ë£Œ!" : "ë‹¤ìŒ ë¬¸ì œ"}</span></div></div></div>`;
            }
            app.appendChild(div);
        }

        function nextPage() { 
            if (currentState.pageIndex < storyData.length - 1) { 
                currentState.pageIndex++; 
                render(); 
            }
        }
        function prevPage() { 
            if (currentState.pageIndex > 0) { 
                currentState.pageIndex--; 
                render(); 
            } 
        }
        function startQuiz() { 
            currentState.inQuiz = true; // í€´ì¦ˆ ëª¨ë“œ ì‹œì‘
            currentState.quizIndex = 0; 
            currentState.quizStatus = 'question'; 
            render(); 
        }
        function checkAnswer(ans) { currentState.lastAnswer = ans; currentState.quizStatus = 'result'; render(); }
        function showExplanation() { currentState.quizStatus = 'explanation'; render(); }
        function nextQuizStep() { currentState.quizIndex++; currentState.quizStatus = 'question'; render(); }
        function restart() { 
            currentState.pageIndex = 0; 
            currentState.quizIndex = 0; 
            currentState.inQuiz = false;
            render(); 
        }

        render();
    </script>
</body>
</html>
