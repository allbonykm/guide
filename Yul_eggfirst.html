<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìœ¨ì´ì˜ ê³¼í•™ì—¬í–‰ : ë‹¬ê±€ê³¼ ë‹­</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #fef9c3;
            color: #333;
            overflow: hidden;
            touch-action: manipulation;
        }

        .font-comic {
            font-family: 'Jua', sans-serif;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
            100% { transform: translateY(0px); }
        }

        @keyframes shine {
            0% { filter: brightness(100%) drop-shadow(0 0 2px gold); transform: scale(1); }
            50% { filter: brightness(120%) drop-shadow(0 0 8px gold); transform: scale(1.05); }
            100% { filter: brightness(100%) drop-shadow(0 0 2px gold); transform: scale(1); }
        }

        .btn-gold-egg {
            animation: shine 2s infinite ease-in-out;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-gold-egg:active {
            transform: scale(0.9);
        }

        .btn-broken-egg {
            cursor: pointer;
            transition: transform 0.2s;
            opacity: 0.7;
        }
        
        .btn-broken-egg:hover {
            opacity: 1;
        }

        .btn-quiz {
            animation: float 2s infinite ease-in-out;
        }

        /* í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .text-box {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -4px 15px rgba(255, 165, 0, 0.15);
        }

        /* ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ (ì¼ë°˜ ìŠ¤í† ë¦¬ í˜ì´ì§€ìš©) */
        .img-container {
            width: 100%;
            height: 100%;
            background-color: #fffbeb;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        /* ë¹„ìœ¨ ìœ ì§€í•˜ë©° ê½‰ ì°¨ê²Œ (í‘œì§€/ì—”ë”©ìš©) */
        .img-full {
            width: 100%;
            height: 100%;
            object-fit: cover; /* í™”ë©´ ê½‰ ì±„ì›€ */
            object-position: center;
        }

        /* ë¹„ìœ¨ ìœ ì§€í•˜ë©° ì „ì²´ ë³´ì—¬ì£¼ê¸° (ìŠ¤í† ë¦¬ìš©) */
        .img-fit {
            width: 100%;
            height: 100%;
            object-fit: contain; 
            object-position: center;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col justify-center items-center">

    <div id="app" class="w-full h-full max-w-md bg-white relative shadow-2xl overflow-hidden flex flex-col border-x border-yellow-200">
    </div>

    <script>
        // ë°ì´í„° ì •ì˜
        const storyData = [
            {
                type: 'cover',
                image: 'images/egg0.jpg', // í‘œì§€ ì´ë¯¸ì§€
                alt: 'í‘œì§€: ë‹­ì´ ë¨¼ì €? ë‹¬ê±€ì´ ë¨¼ì €?'
            },
            {
                type: 'intro',
                image: 'images/egg1.jpg',
                title: 'ë“±ì¥ì¸ë¬¼ ì†Œê°œ',
                content: `
                    <p class="mb-2"><strong class="text-pink-500">ì¡°ìœ¨ (ìœ¨)</strong>: ì•„ë¦¬ì•„ë‚˜ ê·¸ë€ë° ìŠ¤íƒ€ì¼ì˜ í¬ë‹ˆí…Œì¼ì´ ì°°ë–¡ì¸ ë©‹ì§„ ì†Œë…€. í˜¸ê¸°ì‹¬ ëŒ€ì¥.</p>
                    <p class="mb-2"><strong class="text-blue-600">íœ˜ì„œ</strong>: ë™ê·¸ë€ ì•ˆê²½ì„ ì“´ ìœ¨ì´ì˜ ì§ê¿. ë…¼ë¦¬ì ì¸ ì²™í•˜ì§€ë§Œ ì€ê·¼íˆ ê³ ì§‘ì´ ì„¸ë‹¤.</p>
                    <p class="mb-2"><strong class="text-green-700">ë‹¤ìœˆ í• ì•„ë²„ì§€</strong>: í•˜ì–€ ìˆ˜ì—¼ì´ ë¥ìˆ˜ë£©í•œ ê³¼í•™ì. ì§„í™”ë¡ ì˜ ì°½ì‹œì.</p>
                    <p><strong class="text-yellow-600">ì•Œëª½ì´ & ì²«ê¼¬ê¼¬</strong>: ì§€êµ¬ ìµœì´ˆì˜ 'ì§„ì§œ' ë‹¬ê±€ê³¼ ë‹­.</p>
                `
            },
            {
                type: 'story',
                image: 'images/egg2.jpg',
                title: '1ì¥: ê¸‰ì‹ì‹¤ì˜ ëŒ€ê²©ëŒ!',
                sub: '(ì˜¤ëŠ˜ì˜ ë©”ë‰´: ì‚¶ì€ ë‹¬ê±€ê³¼ ã…‹ã…‹ã…‹ì¹˜í‚¨)',
                content: `
                    <p class="mb-2"><span class="font-bold text-blue-600">íœ˜ì„œ:</span> (ì•ˆê²½ì„ ì˜¬ë¦¬ë©°) "ìœ¨ì•„, ì´ <strong class='text-orange-600'>'ã…‹ã…‹ã…‹ì¹˜í‚¨'</strong>ì´ ë˜ë ¤ë©´ ì—„ë§ˆ ë‹­ì´ ìˆì–´ì•¼ í•´. ê·¸ëŸ¬ë‹ˆê¹Œ ë‹­ì´ ë¨¼ì €ì•¼!"</p>
                    <p class="mb-2"><span class="font-bold text-pink-500">ìœ¨:</span> (í¬ë‹ˆí…Œì¼ì„ ì°°ë‘ì´ë©°) "ë¬´ìŠ¨ ì†Œë¦¬! ë‹¬ê±€ì—ì„œ ë³‘ì•„ë¦¬ê°€ ë‚˜ì˜¤ê³  ë‹­ì´ ë˜ëŠ” ê±°ì–ì•„. ë‹¬ê±€ì´ ë¨¼ì €ì§€!"</p>
                    <p class="mb-2"><span class="font-bold text-blue-600">íœ˜ì„œ:</span> "ë‹­ì´ ì—†ìœ¼ë©´ ì•Œì„ ëˆ„ê°€ ë‚³ëŠ”ë°?"</p>
                    <p class="mb-2"><span class="font-bold text-gray-500">???:</span> "í—ˆí—ˆ, ì•„ì£¼ ì¤‘ìš”í•œ ë¬¸ì œë¡œ ì‹¸ìš°ê³  ìˆêµ¬ë‚˜!"</p>
                    <p><span class="font-bold text-green-700">ë‹¤ìœˆ:</span> (í‘! í•˜ê³  ë‚˜íƒ€ë‚˜ë©°) "ë‚˜ëŠ” ì°°ìŠ¤ ë‹¤ìœˆì´ë€ë‹¤. ì, ì´ <strong class='text-purple-600'>'ì‹œê°„ ì—¬í–‰ VR'</strong>ì„ ì“°ê³  ì •ë‹µì„ ì°¾ìœ¼ëŸ¬ ê°€ë³¼ê¹Œ?"</p>
                `
            },
            {
                type: 'story',
                image: 'images/egg3.jpg',
                title: '2ì¥: ë‹­ì˜ ì¡°ìƒì„ ì°¾ì•„ì„œ',
                sub: '(ìˆ˜ì²œë§Œ ë…„ ì „, ê³ ëŒ€ ì •ê¸€)',
                content: `
                    <p class="mb-2"><span class="font-bold text-pink-500">ìœ¨:</span> (VR ê³ ê¸€ì„ ì“°ê³ ) "ìš°ì™€! ì—¬ê¸°ê°€ ì–´ë””ì˜ˆìš”? ì € ìƒˆëŠ” ë‹­ì´ë‘ ë¹„ìŠ·í•œë° ì¢€ ë‹¤ë¥´ê²Œ ìƒê²¼ì–´ìš”!"</p>
                    <p class="mb-2"><span class="font-bold text-green-700">ë‹¤ìœˆ:</span> "ë§ì•„. ì €ê±´ ë‹­ì˜ ì•„ì£¼ ë¨¼ ì¡°ìƒì¸ <strong class='text-amber-800'>'ê¼¬ê¼¬ë§˜(ì›ì‹œ ë‹­)'</strong>ì´ë€ë‹¤. ì§€ê¸ˆì˜ ë‹­ê³¼ëŠ” ëª¨ìŠµì´ ì¡°ê¸ˆ ë‹¤ë¥´ì§€."</p>
                    <p class="mb-2"><span class="font-bold text-blue-600">íœ˜ì„œ:</span> "ê¼¬ê¼¬ë§˜ë„ ì•Œì„ ë‚³ë‚˜ìš”?"</p>
                    <p><span class="font-bold text-green-700">ë‹¤ìœˆ:</span> "ë¬¼ë¡ ì´ì§€! ì, ì € ë‘¥ì§€ë¥¼ ì˜ ë³´ë ´. ì•„ì£¼ íŠ¹ë³„í•œ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆì–´."</p>
                `
            },
            {
                type: 'story',
                image: 'images/egg4.jpg',
                title: '3ì¥: ë§ˆë²•ì˜ ì„¤ê³„ë„ì™€ ì•Œëª½ì´',
                content: `
                    <p class="mb-2"><span class="font-bold text-green-700">ë‹¤ìœˆ:</span> "ì—„ë§ˆ ì¡°ìƒ ë‹­ê³¼ ì•„ë¹  ì¡°ìƒ ë‹­ì´ ë§Œë‚˜ ì•Œì„ ë§Œë“¤ ë•Œ, <strong class='text-red-500'>'ì‘ì€ ë³€í™”(ëŒì—°ë³€ì´)'</strong>ê°€ ì¼ì–´ë‚¬ë‹¨ë‹¤."</p>
                    <p class="mb-2 bg-yellow-50 p-2 rounded border border-yellow-200 text-sm">
                        ğŸ§¬ <strong>ìœ ì „ì  ë³€ì´:</strong> ë¶€ëª¨ì™€ ì¡°ê¸ˆ ë‹¤ë¥¸ ìƒˆë¡œìš´ íŠ¹ì§•ì„ ê°€ì§„ ì•„ê¸°ê°€ íƒœì–´ë‚˜ëŠ” ê²ƒ!
                    </p>
                    <p class="mb-2"><span class="font-bold text-green-700">ë‹¤ìœˆ:</span> "ë¶€ëª¨ëŠ” 'ì™„ë²½í•œ ë‹­'ì´ ì•„ë‹ˆì—ˆì§€ë§Œ, ì´ ì•Œ ì†ì— ë“¤ì–´ìˆëŠ” ì•„ê¸°ëŠ” ìœ ì „ìê°€ ë°”ë€Œì–´ì„œ <strong class='text-orange-600'>ìµœì´ˆì˜ 'ì§„ì§œ ë‹­'</strong>ì´ ëœ ê±°ë€ë‹¤. ì´ ì•Œì„ 'ì•Œëª½ì´'ë¼ê³  ë¶€ë¥´ì."</p>
                    <p><span class="font-bold text-pink-500">ìœ¨:</span> "ì•„í•˜! ê·¸ëŸ¬ë‹ˆê¹Œ ë‹­ì˜ ì¡°ìƒì´ ë‚³ì€ ì•Œì´ì§€ë§Œ, ë‚´ìš©ë¬¼ì€ 'ì§„ì§œ ë‹­'ì¸ ê±°ë„¤ìš”?"</p>
                `
            },
            {
                type: 'story',
                image: 'images/egg5.jpg',
                title: '4ì¥: ìµœì´ˆì˜ ë‹­, ì²«ê¼¬ê¼¬ íƒ„ìƒ!',
                content: `
                    <p class="mb-2 text-center text-2xl font-comic text-orange-500 animate-bounce">ë¹ ì§! ì‚ì•¼ì•…!</p>
                    <p class="mb-2"><span class="font-bold text-green-700">ë‹¤ìœˆ:</span> "ë³´ë ´! ì•Œëª½ì´ì—ì„œ íƒœì–´ë‚œ ì € ë³‘ì•„ë¦¬ê°€ ë°”ë¡œ ì§€êµ¬ ìµœì´ˆì˜ ë‹­, <strong class='text-red-500'>'ì²«ê¼¬ê¼¬'</strong>ë€ë‹¤."</p>
                    <p class="mb-2"><span class="font-bold text-blue-600">íœ˜ì„œ:</span> (ì…ì„ ë”± ë²Œë¦¬ë©°) "ìœ¼ì•…! ì •ë¦¬í•´ ë³¼ê²Œìš”."</p>
                    <div class="bg-gray-100 p-3 rounded-lg my-2 text-sm">
                        <p>1. ë‹­ ì¡°ìƒ(ë‹­ì€ ì•„ë‹˜)ì´ ì•Œì„ ë‚³ìŒ</p>
                        <p>2. ì•Œ ì†ì—ì„œ 'ë³€í™”'ê°€ ì¼ì–´ë‚¨ âœ¨</p>
                        <p>3. ê·¸ ì•Œì—ì„œ 'ìµœì´ˆì˜ ë‹­(ì²«ê¼¬ê¼¬)'ì´ íƒœì–´ë‚¨ ğŸ£</p>
                    </div>
                    <p><span class="font-bold text-pink-500">ìœ¨:</span> "ê·¸ë ‡ë‹¤ë©´... ìµœì´ˆì˜ ë‹­ì´ ë‚˜ì˜¤ë ¤ë©´ ê·¸ ë³€í™”ëœ <strong class='text-yellow-600'>'ì•Œ'ì´ ë¨¼ì € ìˆì–´ì•¼ í•˜ë„¤!</strong> ë‚´ê°€ ì´ê²¼ë‹¤!"</p>
                `
            },
            {
                type: 'story',
                image: 'images/egg6.jpg',
                title: '5ì¥: 2ë§Œ ì‚´ ë¨¹ì€ ë‹¬ê±€ í• ì•„ë²„ì§€',
                content: `
                    <p class="mb-2"><span class="font-bold text-green-700">ë‹¤ìœˆ:</span> "ë”©ë™ëŒ•! ìœ¨ì´ê°€ ë§ì•˜ì–´. í•˜ë‚˜ ë” ì•Œë ¤ì£¼ìë©´, ë”±ë”±í•œ ê»ì§ˆì„ ê°€ì§„ 'ì•Œ'ì€ ê³µë£¡ ì‹œëŒ€ë¶€í„° ìˆì—ˆë‹¨ë‹¤."</p>
                    <p class="mb-2"><span class="font-bold text-green-700">ë‹¤ìœˆ:</span> "ë§Œì•½ ë‹­ì„ 1ì‚´ ì•„ê¸°ë¼ê³  ì¹˜ë©´, <strong class='text-gray-600'>'ì•Œ'ì´ë¼ëŠ” ì¡´ì¬ëŠ” 2ë§Œ ì‚´ë„ ë„˜ì€ í• ì•„ë²„ì§€</strong>ë€ë‹¤."</p>
                    <p class="mb-2"><span class="font-bold text-blue-600">íœ˜ì„œ:</span> (VRì„ ë²—ìœ¼ë©°) "ë¶„í•˜ì§€ë§Œ ì¸ì •í• ê²Œìš”. ìœ ì „ìê°€ ë³€í•´ì„œ ì•Œ ì†ì— ë“¤ì–´ê°€ëŠ” ê²Œ ë¨¼ì €ë‹ˆê¹Œ, ë‹¬ê±€ì´ ë¨¼ì €êµ°ìš”!"</p>
                    <p><span class="font-bold text-pink-500">ìœ¨:</span> "íˆíˆ, ë‹¤ìœˆ í• ì•„ë²„ì§€ ê³ ë§™ìŠµë‹ˆë‹¤! ì´ì œ ã…‹ã…‹ã…‹ì¹˜í‚¨ ë¨¹ìœ¼ëŸ¬ ê°€ìš”!"</p>
                `
            },
            {
                type: 'quiz_intro',
                image: 'images/egg7.jpg',
                title: 'ë‹¤ìœˆì˜ OX í€´ì¦ˆ!',
                sub: '(ë°°ìš´ ë‚´ìš©ì„ í™•ì¸í•´ ë³¼ê¹Œìš”?)',
                content: `
                    <p class="mb-4 text-center text-lg">"ì ê¹! ëŒì•„ê°€ê¸° ì „ì— í€´ì¦ˆë¥¼ í’€ì–´ì•¼ì§€?"</p>
                    <p class="text-center text-gray-600">3ë¬¸ì œë¥¼ ëª¨ë‘ ë§íˆë©´<br>ë‹¤ìœˆ í• ì•„ë²„ì§€ê°€ ì„ ë¬¼ì„ ì¤„ì§€ë„ ëª°ë¼ìš”!</p>
                `
            },
            {
                type: 'ending',
                image: 'images/egg8.jpg', // ì—”ë”© ì´ë¯¸ì§€
                alt: 'ë'
            }
        ];

        const quizData = [
            {
                question: "ìµœì´ˆì˜ ë‹­ì¸ 'ì²«ê¼¬ê¼¬'ë¥¼ ë‚³ì€ ì—„ë§ˆëŠ” ì§€ê¸ˆì˜ ë‹­ê³¼ ë˜‘ê°™ì€ ë‹­ì´ì—ˆë‹¤?",
                answer: false,
                explanation: "ì—„ë§ˆëŠ” ë‹­ì˜ ì¡°ìƒ(ì›ì‹œ ë‹­)ì´ì—ˆì–´. ì—„ë§ˆì™€ ì•„ì£¼ ì¡°ê¸ˆ ë‹¤ë¥¸ ìœ ì „ìë¥¼ ê°€ì§„ ì•Œì—ì„œ ì²« ë²ˆì§¸ ë‹­ì´ íƒœì–´ë‚œ ê±°ì•¼."
            },
            {
                question: "ë‹­ì´ ë˜ê¸° ìœ„í•œ ìœ ì „ì  ë³€í™”(ëŒì—°ë³€ì´)ëŠ” ë‹­ì´ ë‹¤ ìë€ í›„ì— ì¼ì–´ë‚¬ë‹¤?",
                answer: false,
                explanation: "ë³€í™”ëŠ” ì•Œì´ ë§Œë“¤ì–´ì§ˆ ë•Œ(ìˆ˜ì •ë  ë•Œ) ì¼ì–´ë‚¬ì–´."
            },
            {
                question: "'ìµœì´ˆì˜ ë‹­'ë³´ë‹¤ ê·¸ ë‹­ì´ íƒœì–´ë‚œ 'ì•Œ(ì•Œëª½ì´)'ì´ ì„¸ìƒì— ë¨¼ì € ì¡´ì¬í–ˆë‹¤?",
                answer: true,
                explanation: "ë‹­ì˜ ì¡°ìƒì´ ë‚³ì€ ì•Œ ì†ì— ì´ë¯¸ 'ìµœì´ˆì˜ ë‹­'ì´ ë  ì•„ê¸°ê°€ ë“¤ì–´ìˆì—ˆìœ¼ë‹ˆ, ì•Œì´ ë¨¼ì €ì•¼!"
            }
        ];

        // ìƒíƒœ ê´€ë¦¬
        let currentState = {
            pageIndex: 0,
            quizIndex: 0,
            quizStatus: 'question' // question, result, explanation
        };

        const app = document.getElementById('app');

        // ë©”ì¸ ë Œë”ë§ í•¨ìˆ˜
        function render() {
            app.innerHTML = ''; // ì´ˆê¸°í™”
            
            // 1. í€´ì¦ˆ í˜ì´ì§€ê°€ ì•„ë‹Œ ê²½ìš° (ìŠ¤í† ë¦¬, í‘œì§€, ì—”ë”©)
            if (currentState.pageIndex < storyData.length) {
                const page = storyData[currentState.pageIndex];
                
                if (page.type === 'cover') {
                    renderCover(page);
                } else if (page.type === 'ending') {
                    renderEnding(page);
                } else if (page.type === 'quiz_intro') {
                    renderStoryPage(page, true);
                } else {
                    renderStoryPage(page, false);
                }
            } 
            // 2. í€´ì¦ˆ ì§„í–‰ ì¤‘
            else if (currentState.pageIndex === storyData.length) {
                renderQuiz();
            }
        }

        // --- í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë“¤ ---

        function renderCover(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in bg-black overflow-hidden";
            div.onclick = nextPage;
            div.innerHTML = `
                <div class="absolute inset-0 z-0">
                    <img src="${data.image}" class="img-full" alt="${data.alt}" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full bg-yellow-400 flex flex-col items-center justify-center text-white text-2xl font-comic\\'><span class=\\'text-6xl mb-4\\'>ğŸ£</span><h1>ë‹­ vs ë‹¬ê±€<br>ê³¼í•™ ëŒ€íƒí—˜</h1></div>'">
                </div>
                
                <div class="absolute inset-x-0 bottom-0 z-10 pb-16 pt-32 bg-gradient-to-t from-black/60 to-transparent flex flex-col items-center justify-end">
                    <div class="inline-block bg-white/90 px-8 py-3 rounded-full shadow-lg animate-pulse backdrop-blur-sm">
                        <span class="font-comic text-xl text-orange-600">í™”ë©´ì„ íƒ­í•˜ì—¬ ì‹œì‘í•˜ê¸°</span>
                    </div>
                </div>
            `;
            app.appendChild(div);
        }

        function renderStoryPage(data, isQuizIntro) {
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-white fade-in";
            
            // ì´ë¯¸ì§€ ì˜ì—­ (flex-1ë¡œ ë‚¨ì€ ê³µê°„ ëª¨ë‘ ì°¨ì§€ -> ì•½ 65% ì˜ì—­ ìœ ì§€)
            const imgHtml = `
                <div class="flex-1 img-container relative border-b-4 border-yellow-300">
                    <img src="${data.image}" class="img-fit" alt="ì‚½í™”" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full bg-gray-100 flex items-center justify-center text-gray-400\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'">
                </div>
            `;

            // í…ìŠ¤íŠ¸ ë° ì»¨íŠ¸ë¡¤ ì˜ì—­ (h-[35%] ë†’ì´ ìœ ì§€)
            const textHtml = `
                <div class="h-[35%] flex flex-col relative bg-yellow-50">
                    <div class="flex-1 p-6 overflow-y-auto text-box -mt-6 z-10 text-lg leading-relaxed relative">
                        ${data.title ? `<h2 class="font-comic text-2xl text-orange-700 mb-1">${data.title}</h2>` : ''}
                        ${data.sub ? `<p class="text-sm text-gray-500 mb-4">${data.sub}</p>` : ''}
                        <div class="space-y-2 text-gray-800">
                            ${data.content}
                        </div>
                    </div>
                    
                    <div class="h-20 bg-white flex justify-between items-center px-8 border-t border-yellow-100 z-20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
                        <div onclick="prevPage()" class="btn-broken-egg flex flex-col items-center text-gray-400 hover:text-gray-600">
                            <span class="text-3xl filter grayscale opacity-60">ğŸ¥šğŸ’”</span>
                            <span class="text-xs font-bold mt-1">ì´ì „</span>
                        </div>
                        
                        ${isQuizIntro ? 
                            `<div onclick="startQuiz()" class="btn-quiz flex flex-col items-center cursor-pointer text-purple-600">
                                <div class="w-14 h-14 bg-purple-600 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-purple-300">?</div>
                                <span class="text-xs font-bold mt-1 text-purple-700">í€´ì¦ˆ ì‹œì‘!</span>
                            </div>` 
                            : 
                            `<div onclick="nextPage()" class="btn-gold-egg flex flex-col items-center text-orange-500">
                                <span class="text-4xl filter drop-shadow-md">âœ¨ğŸ¥šâœ¨</span>
                                <span class="text-xs font-bold mt-1 text-orange-600">ë‹¤ìŒ</span>
                            </div>`
                        }
                    </div>
                </div>
            `;
            
            div.innerHTML = imgHtml + textHtml;
            app.appendChild(div);
        }

        function renderQuiz() {
            if (currentState.quizIndex >= quizData.length) {
                currentState.pageIndex = storyData.length - 1; 
                currentState.quizIndex = 0;
                render();
                return;
            }

            const currentQ = quizData[currentState.quizIndex];
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-yellow-50 fade-in";

            let contentHtml = '';

            // ìƒíƒœ 1: ë¬¸ì œ í’€ê¸°
            if (currentState.quizStatus === 'question') {
                contentHtml = `
                    <div class="flex-1 flex flex-col items-center justify-center p-6 text-center">
                        <span class="text-orange-600 font-bold text-xl mb-4 bg-orange-100 px-4 py-1 rounded-full">ë¬¸ì œ ${currentState.quizIndex + 1} / 3</span>
                        <div class="bg-white p-8 rounded-2xl shadow-xl w-full mb-8 border-2 border-orange-200">
                            <p class="text-2xl font-bold leading-normal break-keep text-gray-800">${currentQ.question}</p>
                        </div>
                        <div class="flex gap-6 w-full justify-center">
                            <button onclick="checkAnswer(true)" class="w-24 h-24 bg-blue-500 rounded-full text-white text-5xl font-black shadow-lg hover:bg-blue-600 active:scale-95 transition border-4 border-blue-300">O</button>
                            <button onclick="checkAnswer(false)" class="w-24 h-24 bg-red-500 rounded-full text-white text-5xl font-black shadow-lg hover:bg-red-600 active:scale-95 transition border-4 border-red-300">X</button>
                        </div>
                    </div>
                    <div class="h-20 bg-white border-t border-gray-200 flex items-center px-4">
                        <button onclick="exitQuiz()" class="text-gray-400 font-bold text-sm flex items-center gap-1">â—€ ëŒì•„ê°€ê¸°</button>
                    </div>
                `;
            } 
            // ìƒíƒœ 2: ê²°ê³¼
            else if (currentState.quizStatus === 'result') {
                const isCorrect = currentState.lastAnswer === currentQ.answer;
                const emoji = isCorrect ? 'ğŸ‰ğŸ£ğŸ‰' : 'ğŸ¤”ğŸ¥š'; 
                const bgColor = isCorrect ? 'bg-green-600' : 'bg-orange-600';
                const message = isCorrect ? 'ì •ë‹µì…ë‹ˆë‹¤!' : 'í‹€ë ¸ì–´ìš”!';
                const subMsg = isCorrect ? 'ì°¸ ì˜í–ˆì–´ìš”!' : 'ë‹¤ì‹œ í•œë²ˆ ìƒê°í•´ë³¼ê¹Œìš”?';

                contentHtml = `
                    <div class="w-full h-full ${bgColor} flex flex-col items-center justify-center text-white cursor-pointer transition-colors duration-500" onclick="showExplanation()">
                        <div class="text-8xl mb-6 animate-bounce">${emoji}</div>
                        <h2 class="text-4xl font-comic mb-2">${message}</h2>
                        <p class="text-xl opacity-90 mb-8">${subMsg}</p>
                        <div class="bg-white/20 px-6 py-2 rounded-full animate-pulse text-sm">
                            í™”ë©´ì„ íƒ­í•˜ì—¬ í•´ì„¤ ë³´ê¸°
                        </div>
                    </div>
                `;
            }
            // ìƒíƒœ 3: í•´ì„¤
            else if (currentState.quizStatus === 'explanation') {
                const isLastQuestion = currentState.quizIndex === quizData.length - 1;
                const nextButtonText = isLastQuestion ? "ëª¨í—˜ ë§ˆì¹˜ê¸°" : "ë‹¤ìŒ ë¬¸ì œë¡œ";

                contentHtml = `
                    <div class="flex-1 flex flex-col p-6 bg-white cursor-pointer" onclick="nextQuizStep()">
                        <div class="flex-1 flex flex-col justify-center items-center">
                            <h3 class="text-2xl font-comic text-orange-700 mb-6">ğŸ“ ë‹¤ìœˆì˜ í•´ì„¤</h3>
                            <div class="bg-yellow-50 p-6 rounded-xl border-2 border-yellow-300 shadow-md w-full relative">
                                <div class="absolute -top-6 -left-2 text-5xl filter drop-shadow-md">ğŸ…</div>
                                <p class="text-xl font-medium text-gray-800 leading-relaxed mt-2 word-keep">
                                    "${currentQ.explanation}"
                                </p>
                            </div>
                        </div>
                        <div class="h-24 w-full flex items-center justify-center">
                            <div class="btn-gold-egg flex flex-col items-center">
                                <span class="text-4xl">âœ¨ğŸ¥šâœ¨</span>
                                <span class="text-sm font-bold text-orange-600 mt-1">${nextButtonText}</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            div.innerHTML = contentHtml;
            app.appendChild(div);
        }

        function renderEnding(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in bg-black overflow-hidden";
            div.onclick = restart;
            div.innerHTML = `
                <div class="absolute inset-0 z-0">
                    <img src="${data.image}" class="img-full" alt="ë" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full bg-slate-900 flex flex-col items-center justify-center text-white\\'><span class=\\'text-6xl mb-4\\'>ğŸ“</span><p class=\\'text-xl\\'>ì—¬í–‰ì´ ëë‚¬ìŠµë‹ˆë‹¤</p></div>'">
                </div>

                <div class="absolute inset-x-0 bottom-0 z-10 pb-16 pt-32 bg-gradient-to-t from-black/80 to-transparent flex flex-col items-center justify-end">
                    <div class="inline-block bg-black/60 text-white px-6 py-2 rounded-full backdrop-blur-sm border border-white/30 font-comic animate-pulse">
                        ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸° â†º
                    </div>
                </div>
            `;
            app.appendChild(div);
        }

        // --- ë¡œì§ í•¨ìˆ˜ë“¤ ---

        function nextPage() {
            if (currentState.pageIndex < storyData.length) {
                currentState.pageIndex++;
                render();
            }
        }

        function prevPage() {
            if (currentState.pageIndex > 0) {
                currentState.pageIndex--;
                render();
            }
        }

        function startQuiz() {
            currentState.pageIndex = storyData.length; 
            currentState.quizIndex = 0;
            currentState.quizStatus = 'question';
            render();
        }

        function exitQuiz() {
            currentState.pageIndex--; 
            render();
        }

        function checkAnswer(userAnswer) {
            currentState.lastAnswer = userAnswer;
            currentState.quizStatus = 'result';
            render();
        }

        function showExplanation() {
            currentState.quizStatus = 'explanation';
            render();
        }

        function nextQuizStep() {
            currentState.quizIndex++;
            currentState.quizStatus = 'question';
            render();
        }

        function restart() {
            currentState.pageIndex = 0;
            currentState.quizIndex = 0;
            render();
        }

        // ì´ˆê¸° ì‹¤í–‰
        render();

    </script>
</body>
</html>
