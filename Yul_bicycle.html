<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìœ¨ì´ì˜ ì—¬í–‰ì‹œë¦¬ì¦ˆ: ìœ¨ì´ì˜ ì—­ì‚¬ì—¬í–‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #fff7ed; overflow: hidden; touch-action: manipulation; }
        .font-comic { font-family: 'Jua', sans-serif; }
        @keyframes float { 0% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-5px) rotate(5deg); } 100% { transform: translateY(0px) rotate(0deg); } }
        .btn-theme { animation: float 2.5s infinite ease-in-out; cursor: pointer; transition: all 0.2s; }
        .btn-theme:active { transform: scale(0.9); }
        .text-box { background-color: rgba(255, 255, 255, 0.98); border-radius: 20px 20px 0 0; box-shadow: 0 -4px 15px rgba(0,0,0,0.1); }
        .img-container { width: 100%; height: 100%; background-color: #fef3c7; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .img-cover { width: 100%; height: 100%; object-fit: cover; }
        .img-fit { width: 100%; height: 100%; object-fit: contain; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* ìºë¦­í„° ëŒ€ì‚¬ ìŠ¤íƒ€ì¼ */
        .char-yul { color: #0ea5e9; font-weight: 700; }    /* sky-500 */
        .char-toto { color: #ec4899; font-weight: 700; }   /* pink-500 */
        .char-baek { color: #16a34a; font-weight: 700; }   /* green-600 */
        .char-daon { color: #9333ea; font-weight: 700; }   /* purple-600 (ë‹¤ì˜¨ ì¶”ê°€) */
        .char-extra { color: #4b5563; font-weight: 700; }  /* gray-600 (ê¸°íƒ€ ì¸ë¬¼) */
    </style>
</head>
<body class="h-screen w-screen flex flex-col justify-center items-center">
    <div id="app" class="w-full h-full max-w-md bg-white relative shadow-2xl overflow-hidden flex flex-col border-x border-orange-100"></div>
    <script>
        // *** AI ë°ì´í„° ìƒì„± ì˜ì—­ ***
        // ì´ë¯¸ì§€ í‚¤ì›Œë“œ: bicycle
        const storyData = [
            // 0. í‘œì§€
            {
                type: 'cover',
                title: 'ìœ¨ì´ì˜ ì—­ì‚¬ì—¬í–‰',
                sub: 'ìì „ê±° í• ì•„ë²„ì§€ë¥¼ ë§Œë‚˜ëŸ¬ ê°€ìš”!',
                image: 'images/bicycle0.jpg'
            },
            // 1. ë“±ì¥ì¸ë¬¼ ì†Œê°œ
            {
                type: 'story',
                title: 'ë“±ì¥ì¸ë¬¼ ì†Œê°œ',
                image: 'images/bicycle1.jpg',
                content: `
                    <div class="space-y-4">
                        <p><span class="char-yul text-lg">ìœ¨</span><br>ì²­ê³¡ì´ˆ 1í•™ë…„, í˜¸ê¸°ì‹¬ ëŒ€ì¥! ê¶ê¸ˆí•œ ê±´ ëª» ì°¸ëŠ” ì”©ì”©í•˜ê³  ë©‹ì§„ ì†Œë…€. ë‹¤ì˜¨ ì–¸ë‹ˆì™€ ìì „ê±° íƒ€ëŠ” ê²ƒì„ ì¢‹ì•„í•´ìš”.</p>
                        <p><span class="char-daon text-lg">ë‹¤ì˜¨</span><br>ì²­ê³¡ì´ˆ 2í•™ë…„, ìš´ë™ ì‹ ê²½ ìµœê³ ! íƒœê¶Œë„ë¥¼ ì‚¬ë‘í•˜ëŠ” ë©‹ì§„ ì†Œë…€. ìœ¨ì´ì˜ ë“ ë“ í•œ ë‹¨ì§ ì–¸ë‹ˆ.</p>
                        <p><span class="char-toto text-lg">í† í† </span><br>ìœ¨ì´ì˜ ì• ì°© í† ë¼ ì¸í˜•, ìœ¨ì´ì˜ ê¶ê¸ˆì¦ì„ í•´ê²°í•´ ì£¼ëŠ” ì²™ì²™ë°•ì‚¬ í† ë¼. ì‹œê°„ ì—¬í–‰ ê°€ì´ë“œ.</p>
                        <p><span class="char-baek text-lg">ë°±í•©</span><br>ìœ¨ì´ì˜ ë°˜ë ¤ ë„ë§ˆë±€, ê·€ì—¬ìš´ ë¦´ë¦¬ í™”ì´íŠ¸ ê²Œì½”. ê¼¬ë¦¬ì—ì„œ ì‹ ë¹„í•œ ë¹›ì„ ë¿œì–´ ì‹œê°„ ì—¬í–‰ ë¬¸ì„ ì—´ì–´ìš”.</p>
                        <p><span class="char-daon text-lg">ìëª½, í‘¸ë”©</span><br>ë‹¤ì˜¨ì´ì˜ ë°˜ë ¤ ë„ë§ˆë±€, ê·€ì—¬ìš´ í¬ë ˆìŠ¤í‹°ë“œ ê²Œì½”.</p>
                    </div>
                `
            },
            // 2. ì œ1ì¥
            {
                type: 'story',
                title: 'ì œ1ì¥: ìì „ê±°ëŠ” ì–¸ì œ íƒœì–´ë‚¬ì„ê¹Œ?',
                image: 'images/bicycle2.jpg',
                content: `
                    <p class="mb-2"><span class="char-daon">ë‹¤ì˜¨:</span> ìœ¨ì•„! ë‚ ì”¨ ì§„ì§œ ì¢‹ë‹¤! ìì „ê±° íƒ€ë‹ˆê¹Œ ì™„ì „ ì‹ ë‚˜ì§€?</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ì‘! ì–¸ë‹ˆë‘ íƒ€ë‹ˆê¹Œ ë” ì¬ë°Œì–´!</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ê·¸ëŸ°ë° ì–¸ë‹ˆ, ìì „ê±°ëŠ” ëˆ„ê°€ ì²˜ìŒ ë§Œë“¤ì—ˆì„ê¹Œ? ì˜›ë‚  ì‚¬ëŒë“¤ë„ ìš°ë¦¬ì²˜ëŸ¼ íƒ”ì„ê¹Œ?</p>
                    <p class="mb-2"><span class="char-daon">ë‹¤ì˜¨:</span> ê¸€ì„? ì•„ì£¼ ì˜›ë‚ ì—” ë§ì„ íƒ”ì„ í…ë°... ì–¸ì œë¶€í„° ìì „ê±°ë¥¼ íƒ”ì§€?</p>
                    <p class="mb-2"><span class="char-toto">í† í† :</span> í í ! ê·¸ê±´ ë‚´ê°€ ì•Œë ¤ì¤„ ìˆ˜ ìˆì§€. ë°±í•©ì•„, ì¶œë°œ ì¤€ë¹„!</p>
                    <p class="mb-2"><span class="char-baek">ë°±í•©:</span> ì‰­! (ë°˜ì§!)</p>
                    <p><span class="char-yul">ìœ¨</span> & <span class="char-daon">ë‹¤ì˜¨</span>: ìœ¼ì•…! ë¹¨ë ¤ ë“¤ì–´ê°„ë‹¤~!</p>
                `
            },
            // 3. ì œ2ì¥
            {
                type: 'story',
                title: 'ì œ2ì¥: ë°œë¡œ ë‹¬ë¦¬ëŠ” ê¸°ê³„ (ë…ì¼)',
                image: 'images/bicycle3.jpg',
                content: `
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ì§ ! ì—¬ê¸°ëŠ” ì•½ 200ë…„ ì „ì¸ 1817ë…„ ë…ì¼ì´ì•¼. ì €ê¸° ê°€ëŠ” 'ë“œë¼ì´ìŠ¤' ì•„ì €ì”¨ë¥¼ ë´.</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ì–´? ìì „ê±°ëŠ” ë§ëŠ”ë°... í˜ë‹¬ì´ ì—†ì–´! ë°œë¡œ ë•…ì„ ì¿µì¿µ ì°¨ë©´ì„œ ê°€ë„¤?</p>
                    <p class="mb-2"><span class="char-daon">ë‹¤ì˜¨:</span> í‘¸í•˜í•˜! ì•‰ì•„ì„œ íƒ€ëŠ” í‚¥ë³´ë“œ ê°™ì•„. ì—‰ë©ì´ ì•ˆ ì•„í”ˆê°€?</p>
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ì €ê²Œ ìµœì´ˆì˜ ìì „ê±° <strong>'ë“œë¼ì´ì§€ë„¤'</strong>ì•¼. í˜ë‹¬ì€ ì—†ì§€ë§Œ ê±·ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ë¹¨ë¼ì„œ ì¸ê¸°ê°€ ë§ì•˜ëŒ€.</p>
                    <p class="mb-2"><span class="char-extra">ë“œë¼ì´ìŠ¤:</span> ë¹„ì¼œìš”, ë¹„ì¼œ! ë‚´ 'ë‹¬ë¦¬ëŠ” ê¸°ê³„'ê°€ ë‚˜ê°€ì‹ ë‹¤! ìœ¼ëì°¨ì°¨!</p>
                `
            },
            // 4. ì œ3ì¥
            {
                type: 'story',
                title: 'ì œ3ì¥: ì¡°ì„ ì— ë‚˜íƒ€ë‚œ ì¶•ì§€ì°¨',
                image: 'images/bicycle4.jpg',
                content: `
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ì, ì´ë²ˆì—” ìš°ë¦¬ë‚˜ë¼ì•¼! ì €ê¸° ì•ˆê²½ ì“´ ë©‹ìŸì´ ë°•ì‚¬ë‹˜ì´ ì˜¤ì‹ ë‹¤.</p>
                    <p class="mb-2"><span class="char-extra">ì‚¬ëŒ1:</span> ì•„ì´ê³ ! ì €ê²Œ ë­ì—¬? ì†Œë„ ì—†ê³  ë§ë„ ì—†ëŠ”ë° ë°”í€´ê°€ í˜¼ì êµ´ëŸ¬ê°€ë„¤!</p>
                    <p class="mb-2"><span class="char-extra">ì‚¬ëŒ2:</span> ê·€ì‹ ì´ ê³¡í•  ë…¸ë¦‡ì´ë„¤! ë•…ì„ ì ‘ì–´ì„œ ë‹¬ë¦°ë‹¤ëŠ” <strong>'ì¶•ì§€ì°¨'</strong>ì¸ê°€ ë´! ê´´ë¬¼ ì°¨ë‹¤!</p>
                    <p class="mb-2"><span class="char-extra">ì„œì¬í•„:</span> í—ˆí—ˆ, ë†€ë¼ì§€ ë§ˆì‹œì˜¤. ì´ê²ƒì€ ë¯¸êµ­ì—ì„œ ê°€ì ¸ì˜¨ ë¬¸ëª…ì˜ ì´ê¸°, ìì „ê±°ë¼ í•˜ì˜¤. ìš°ë¦¬ë„ ì´ì œ ì´ëŸ° í¸ë¦¬í•œ ê²ƒì„ ë°°ì›Œì•¼ í•˜ì˜¤!</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ìš°ì™€! ì„œì¬í•„ ë°•ì‚¬ë‹˜ì´ë‹¤! ìš°ë¦¬ë‚˜ë¼ì— ì²˜ìŒ ìì „ê±° íƒ€ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì£¼ì…¨êµ¬ë‚˜!</p>
                `
            },
            // 5. ì œ4ì¥
            {
                type: 'story',
                title: 'ì œ4ì¥: ì—‰ë©ì´ë¥¼ ì§€ì¼œë¼!',
                image: 'images/bicycle5.jpg',
                content: `
                    <p class="mb-2"><span class="char-daon">ë‹¤ì˜¨:</span> ì²˜ìŒì—” ë°œë¡œ ì°¨ê³  ë‹¤ë…”ëŠ”ë°, ì„œì¬í•„ ë°•ì‚¬ë‹˜ì´ íƒˆ ë•ŒëŠ” í˜ë‹¬ì´ ìˆì—ˆì–´! ê·¸ ì‚¬ì´ì— ë¬´ìŠ¨ ì¼ì´ ìˆì—ˆë˜ ê±°ì§€?</p>
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ì˜¤, ë‹¤ì˜¨ì´ ì˜ˆë¦¬í•œë°? ì‚¬ëŒë“¤ì´ "ë°œì„ ê³„ì† êµ¬ë¥´ë‹ˆê¹Œ ë„ˆë¬´ í˜ë“¤ì–´!" í•´ì„œ í˜ë‹¬ì„ ë‹¬ì•˜ì–´.</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ê·¸ë¦¬ê³  ë°”í€´ë„ ë‹¬ë¼! ì˜›ë‚ ì—” ë‚˜ë¬´ë‚˜ ì‡  ë°”í€´ë¼ ì—‰ë©ì´ê°€ ì—„ì²­ ì•„íŒ ì„ ê²ƒ ê°™ì€ë°?</p>
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ì •ë‹µ! ì¶©ê²©ì„ ì¤„ì´ë ¤ê³  ë°”í€´ì— ê³µê¸°ë¥¼ ë„£ì€ <strong>'ê³µê¸° íƒ€ì´ì–´'</strong>ë¥¼ ë°œëª…í–ˆì§€. ë•ë¶„ì— ë„ˆí¬ì²˜ëŸ¼ ì—‰ë©ì´ ì•ˆ ì•„í”„ê²Œ íƒˆ ìˆ˜ ìˆëŠ” ê±°ì•¼.</p>
                    <p class="mb-2"><span class="char-baek">ë°±í•©:</span> (ë„ë•ë„ë•) ì‰­!</p>
                `
            },
            // 6. ì œ5ì¥
            {
                type: 'story',
                title: 'ì œ5ì¥: ìš°ë¦¬ë“¤ì˜ ì‹ ë‚˜ëŠ” ìì „ê±° ê²½ì£¼',
                image: 'images/bicycle6.jpg',
                content: `
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ìš°ì™€! ì—­ì‚¬ ì—¬í–‰ì„ í•˜ê³  ì˜¤ë‹ˆê¹Œ í˜ì´ í„í„ ë‚˜ëŠ” ê²ƒ ê°™ì•„! ì†ë„ê°€ ì ì  ì˜¬ë¼ê°€!</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ì–¸ë‹ˆ! ì†ë„ 20 ë„˜ìœ¼ë©´ ë‹¤ì˜¨ ì–¸ë‹ˆë‘ ìì „ê±° ì‹œí•©í•˜ì! ì¤€ë¹„ëì§€?</p>
                    <p class="mb-2"><span class="char-daon">ë‹¤ì˜¨:</span> í•˜í•˜! ì¢‹ì•„! íƒœê¶Œ ì†Œë…€ì˜ ìŠ¤í”¼ë“œë¥¼ ì´ê¸¸ ìˆ˜ ìˆì„ê¹Œ? ì–´ë”” í•œë²ˆ ë”°ë¼ì™€ ë´!</p>
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ìœ¼ì•…! ìœ¨ì•„, ë„ˆë¬´ ë¹¨ë¼!</p>
                    <p class="mb-2"><span class="char-baek">ë°±í•©:</span> ì‰­! (ê½‰ ì¡ì•„!)</p>
                    <p class="mb-4"><span class="char-yul">ìœ¨</span> & <span class="char-daon">ë‹¤ì˜¨</span>: í•˜ë‚˜, ë‘˜, ì…‹, ì¶œë°œ~!</p>
                `
            },
            // 7. í€´ì¦ˆ ì¸íŠ¸ë¡œ
            {
                type: 'quiz_intro',
                title: 'ìœ¨ì´ì™€ í•¨ê»˜í•˜ëŠ” ì—­ì‚¬ OX í€´ì¦ˆ!',
                image: 'images/bicycle7.jpg',
                content: `
                    <p class="text-center text-lg mb-4">ìì „ê±° ì—­ì‚¬ì—¬í–‰ ì¬ë¯¸ìˆì—ˆë‹ˆ?</p>
                    <p class="text-center">ì´ì œ ìœ¨ì´, ë‹¤ì˜¨ì´ì™€ í•¨ê»˜<br>í€´ì¦ˆë¥¼ í’€ì–´ë³´ë©° ë‚´ìš©ì„ ì •ë¦¬í•´ ë³´ì!</p>
                    <br>
                    <p class="text-center font-bold text-pink-500">Are you ready?</p>
                `
            },
            // 8. ì—”ë”© (ìƒˆë¡œ ì¶”ê°€ëœ ë¶€ë¶„)
            {
                type: 'ending',
                title: 'ì—¬í–‰ ë!',
                image: 'images/bicycle8.jpg',
                content: 'ìœ¨ì´ì™€ í•¨ê»˜í•œ ìì „ê±° ì—­ì‚¬ ì—¬í–‰ ì¦ê±°ì› ë‹ˆ?<br>ë‹¤ìŒì—ëŠ” ë” ì‹ ê¸°í•œ ì—¬í–‰ì§€ì—ì„œ ë§Œë‚˜ì!'
            }
        ];

        const quizData = [
            {
                question: "ì•½ 200ë…„ ì „(1817ë…„) ë§Œë“¤ì–´ì§„ ìµœì´ˆì˜ ìì „ê±° 'ë“œë¼ì´ì§€ë„¤'ëŠ” í˜ë‹¬ì´ ìˆì—ˆë‹¤?",
                answer: false,
                explanation: "ë“œë¼ì´ì§€ë„¤ëŠ” í˜ë‹¬ì´ ì—†ì—ˆì–´. ë‘ ë°œë¡œ ë•…ì„ ë»¥ë»¥ ì°¨ë©´ì„œ 'ìœ¼ëì°¨ì°¨!' í•˜ê³  ì•ìœ¼ë¡œ ë‚˜ê°”ëŒ€. ë§ˆì¹˜ í‚¥ë³´ë“œì²˜ëŸ¼ ë§ì´ì•¼!"
            },
            {
                question: "ìš°ë¦¬ë‚˜ë¼ì—ì„œ ì„œì¬í•„ ë°•ì‚¬ë‹˜ì´ ìì „ê±°ë¥¼ íƒ€ëŠ” ëª¨ìŠµì„ ë³´ê³  ì‚¬ëŒë“¤ì€ 'ì¶•ì§€ì°¨'ë¼ê³  ë¶ˆë €ë‹¤?",
                answer: true,
                explanation: "ì˜›ë‚  ì‚¬ëŒë“¤ì€ í˜¼ì êµ´ëŸ¬ê°€ëŠ” ë°”í€´ë¥¼ ì²˜ìŒ ë³´ê³  ê¹œì§ ë†€ëëŒ€. 'ì¶•ì§€ì°¨'ëŠ” ë•…ì„ ì ‘ì–´ì„œ ìˆœì‹ê°„ì— ì´ë™í•˜ëŠ” ë„ìˆ ì„ ë¶€ë¦¬ëŠ” ì°¨ë¼ëŠ” ëœ»ì´ì•¼!"
            },
            {
                question: "ìì „ê±° ë°”í€´ì— ê³µê¸° íƒ€ì´ì–´ë¥¼ ë¼ìš´ ì´ìœ ëŠ” ì—‰ë©ì´ê°€ ì•„í”„ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•´ì„œë‹¤?",
                answer: true,
                explanation: "ë”±ë”±í•œ ë‚˜ë¬´ ë°”í€´ë‚˜ ì‡  ë°”í€´ëŠ” ìš¸í‰ë¶ˆí‰í•œ ê¸¸ì„ ê°€ë©´ ì—‰ë©ì´ê°€ ë„ˆë¬´ ì•„íŒ ëŒ€. ê³µê¸°ê°€ ë¹µë¹µí•œ ê³ ë¬´ íƒ€ì´ì–´ ë•ë¶„ì— í‘¹ì‹ í‘¹ì‹ í•˜ê²Œ íƒˆ ìˆ˜ ìˆê²Œ ëœ ê±°ì•¼."
            }
        ];
        
        const THEME_EMOJI = "ğŸš²"; // ìì „ê±° ì´ëª¨ì§€ ì„ ì •

        // --- ê³ ì • ë¡œì§ (ìˆ˜ì • ë¶ˆí•„ìš”) ---
        let currentState = { pageIndex: 0, quizIndex: 0, quizStatus: 'question', lastAnswer: null };
        const app = document.getElementById('app');

        function render() {
            app.innerHTML = ''; 
            if (currentState.pageIndex < storyData.length) {
                const page = storyData[currentState.pageIndex];
                if (page.type === 'cover') renderCover(page);
                else if (page.type === 'ending') renderEnding(page);
                else renderStoryPage(page, page.type === 'quiz_intro');
            } else if (currentState.pageIndex === storyData.length) renderQuiz();
        }

        function renderCover(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = nextPage;
            div.innerHTML = `
                <div class="img-container"><img src="${data.image}" class="img-cover" alt="í‘œì§€" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-500\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'"></div>
                <div class="absolute bottom-10 w-full text-center text-white font-comic animate-pulse text-xl drop-shadow-md bg-black/20 py-2">í™”ë©´ì„ íƒ­í•˜ì—¬ ì‹œì‘í•˜ê¸°</div>
            `;
            app.appendChild(div);
        }

        function renderStoryPage(data, isQuizIntro) {
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-white fade-in";
            const imgHtml = `<div class="flex-1 img-container relative border-b-4 border-orange-200"><img src="${data.image}" class="img-fit" alt="ì‚½í™”" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-400\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'"></div>`;
            
            // í…ìŠ¤íŠ¸ ë¹„ìœ¨ 33% ê³ ì •
            const textHtml = `
                <div class="h-[33%] flex flex-col relative">
                    <div class="flex-1 p-6 overflow-y-auto text-box -mt-6 z-10 text-lg leading-relaxed text-gray-800">
                        ${data.title ? `<h2 class="font-comic text-2xl text-orange-500 mb-2">${data.title}</h2>` : ''}
                        ${data.sub ? `<p class="text-sm text-gray-500 mb-4">${data.sub}</p>` : ''}
                        <div class="space-y-1">${data.content}</div>
                    </div>
                    <div class="h-20 bg-white flex justify-between items-center px-8 border-t border-orange-100 z-20">
                        <div onclick="prevPage()" class="flex flex-col items-center cursor-pointer text-gray-400 hover:text-gray-600 transition"><span class="text-2xl opacity-60">âª</span><span class="text-xs font-bold mt-1">ì´ì „</span></div>
                        ${isQuizIntro ? 
                            `<div onclick="startQuiz()" class="cursor-pointer text-pink-500 flex flex-col items-center"><div class="w-14 h-14 bg-pink-500 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-pink-200">?</div><span class="text-xs font-bold mt-1">í€´ì¦ˆ í’€ê¸°!</span></div>` : 
                            `<div onclick="nextPage()" class="btn-theme flex flex-col items-center text-yellow-500"><span class="text-4xl filter drop-shadow-md">${THEME_EMOJI}</span><span class="text-xs font-bold mt-1 text-yellow-600">ë‹¤ìŒ</span></div>`
                        }
                    </div>
                </div>
            `;
            div.innerHTML = imgHtml + textHtml;
            app.appendChild(div);
        }

        function renderEnding(data) {
            const div = document.createElement('div');
            // ì „ì²´ í™”ë©´ì„ ê½‰ ì±„ìš°ê³ , í´ë¦­ ì‹œ ì¬ì‹œì‘(restart)
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = restart; 
            
            // í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´(div.absolute...) ë¶€ë¶„ì„ ì™„ì „íˆ ì‚­ì œí•˜ê³  ì´ë¯¸ì§€ë§Œ ë‚¨ê¹€
            div.innerHTML = `
                <div class="img-container">
                    <img src="${data.image}" class="img-cover" alt="ì—”ë”©" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-500\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'">
                </div>
            `;
            app.appendChild(div);
        }

        function renderQuiz() {
            if (currentState.quizIndex >= quizData.length) { currentState.pageIndex = storyData.length - 1; currentState.quizIndex = 0; render(); return; }
            const currentQ = quizData[currentState.quizIndex];
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-yellow-50 fade-in";
            
            if (currentState.quizStatus === 'question') {
                div.innerHTML = `<div class="flex-1 flex flex-col items-center justify-center p-6 text-center"><span class="text-pink-500 font-bold text-xl mb-4 bg-pink-100 px-4 py-1 rounded-full">ë¬¸ì œ ${currentState.quizIndex + 1} / 3</span><div class="bg-white p-8 rounded-2xl shadow-xl w-full mb-8 border-2 border-yellow-300"><p class="text-2xl font-bold break-keep text-gray-800">${currentQ.question}</p></div><div class="flex gap-6 justify-center"><button onclick="checkAnswer(true)" class="w-24 h-24 bg-blue-500 rounded-full text-white text-5xl font-black shadow-lg">O</button><button onclick="checkAnswer(false)" class="w-24 h-24 bg-red-500 rounded-full text-white text-5xl font-black shadow-lg">X</button></div></div>`;
            } else if (currentState.quizStatus === 'result') {
                const isCorrect = currentState.lastAnswer === currentQ.answer;
                const emoji = isCorrect ? `ğŸ‰${THEME_EMOJI}ğŸ‰` : 'ğŸ¤”ğŸ’¦';
                div.innerHTML = `<div class="w-full h-full ${isCorrect ? 'bg-green-500' : 'bg-orange-400'} flex flex-col items-center justify-center text-white cursor-pointer" onclick="showExplanation()"><div class="text-8xl mb-6 animate-bounce">${emoji}</div><h2 class="text-4xl font-comic mb-4">${isCorrect ? 'ì •ë‹µ!' : 'ë•¡!'}</h2><p class="animate-pulse">íƒ­í•˜ì—¬ í•´ì„¤ ë³´ê¸°</p></div>`;
            } else if (currentState.quizStatus === 'explanation') {
                const isLast = currentState.quizIndex === quizData.length - 1;
                div.innerHTML = `<div class="flex-1 flex flex-col p-6 bg-white cursor-pointer" onclick="nextQuizStep()"><div class="flex-1 flex flex-col justify-center items-center"><h3 class="text-2xl font-comic text-sky-600 mb-6">ğŸ‘§ğŸ» ìœ¨ì´ì˜ ì„¤ëª…</h3><div class="bg-sky-50 p-6 rounded-xl border-2 border-sky-200 shadow-md relative"><div class="absolute -top-4 -left-2 text-4xl">ğŸ’¡</div><p class="text-xl font-medium text-gray-800 leading-relaxed word-keep">"${currentQ.explanation}"</p></div></div><div class="h-24 flex items-center justify-center"><div class="btn-theme flex flex-col items-center"><span class="text-4xl">${THEME_EMOJI}</span><span class="text-sm font-bold text-yellow-600 mt-1">${isLast ? "ì™„ë£Œ!" : "ë‹¤ìŒ ë¬¸ì œ"}</span></div></div></div>`;
            }
            app.appendChild(div);
        }

        function nextPage() { if (currentState.pageIndex < storyData.length) { currentState.pageIndex++; render(); }}
        function prevPage() { if (currentState.pageIndex > 0) { currentState.pageIndex--; render(); }}
        function startQuiz() { currentState.pageIndex = storyData.length; currentState.quizIndex = 0; currentState.quizStatus = 'question'; render(); }
        function checkAnswer(ans) { currentState.lastAnswer = ans; currentState.quizStatus = 'result'; render(); }
        function showExplanation() { currentState.quizStatus = 'explanation'; render(); }
        function nextQuizStep() { currentState.quizIndex++; currentState.quizStatus = 'question'; render(); }
        function restart() { currentState.pageIndex = 0; currentState.quizIndex = 0; render(); }

        render();
    </script>
</body>
</html>
