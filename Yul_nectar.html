<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìœ¨ì´ì˜ ê³¼í•™ì—¬í–‰: ê½ƒì€ ì™œ ê¿€ì„ ë§Œë“¤ê¹Œ?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0fdf4; /* ì—°í•œ ì´ˆë¡ ë°°ê²½ */
            color: #333;
            overflow: hidden;
            touch-action: manipulation;
        }

        .font-comic {
            font-family: 'Jua', sans-serif;
        }

        /* ê¿€ë²Œ/ê½ƒ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-8px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        @keyframes pulse-soft {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .btn-honey {
            animation: float 2s infinite ease-in-out;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-honey:active {
            transform: scale(0.9);
        }

        .btn-quiz {
            animation: pulse-soft 2s infinite ease-in-out;
        }

        /* í…ìŠ¤íŠ¸ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .text-box {
            background-color: rgba(255, 255, 255, 0.98);
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -4px 15px rgba(255, 180, 0, 0.15);
        }

        /* ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ */
        .img-container {
            width: 100%;
            height: 100%;
            background-color: #fffbeb; /* ì—°í•œ ë…¸ë€ ë°°ê²½ */
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .img-cover {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .img-fit {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col justify-center items-center">

    <div id="app" class="w-full h-full max-w-md bg-white relative shadow-2xl overflow-hidden flex flex-col border-x border-green-100">
        </div>

    <script>
        // ë°ì´í„° ì •ì˜
        const storyData = [
            {
                type: 'cover',
                image: 'images/nectar0.jpg',
                alt: 'í‘œì§€: ê½ƒì€ ì™œ ê¿€ì„ ë§Œë“¤ê¹Œ?'
            },
            {
                type: 'intro',
                image: 'images/nectar1.jpg',
                title: 'ë“±ì¥ì¸ë¬¼ ì†Œê°œ',
                content: `
                    <p class="mb-2"><strong class="text-sky-500">ì¡°ìœ¨ (8ì„¸)</strong>: í˜¸ê¸°ì‹¬ ë§ì€ ì²­ê³¡ì´ˆ 1í•™ë…„ 5ë°˜ 17ë²ˆ ì—¬í•™ìƒ. ë†’ê²Œ ë¬¶ì€ í¬ë‹ˆí…Œì¼ë¡œ ì”©ì”©í•˜ê³  ë©‹ì§„ ì•„ì´!</p>
                    <p class="mb-2"><strong class="text-yellow-600">ê¿€ë²Œ ì¹œêµ¬</strong>: ìœ¨ì´ì—ê²Œ ê¿€ì˜ ë¹„ë°€ì„ ì•Œë ¤ì£¼ëŠ” ì¹œì ˆí•˜ê³  ë™ê¸€ë™ê¸€í•œ ì¹œêµ¬.</p>
                    <p><strong class="text-pink-500">ê½ƒë‹˜</strong>: ê¿€ì„ ë‚˜ëˆ ì£¼ëŠ” ë§ˆìŒì”¨ ì°©í•˜ê³  ì˜ˆìœ ê½ƒ.</p>
                `
            },
            {
                type: 'story',
                image: 'images/nectar2.jpg',
                title: '1ì¥: ê¶ê¸ˆí•œ ê²Œ ìƒê¸´ ìœ¨ì´',
                sub: '(ì–´ëŠ ë”°ëœ»í•œ ì˜¤í›„, ì²­ê³¡ì´ˆë“±í•™êµ ê½ƒë°­)',
                content: `
                    <p class="mb-2"><span class="font-bold text-gray-500">ğŸ“¢</span> í•˜êµ£ê¸¸, ìœ¨ì´ëŠ” í™”ë‹¨ ì•ì— ë©ˆì¶° ì„°ì–´ìš”.</p>
                    <p class="mb-2"><span class="font-bold text-sky-500">ìœ¨ì´:</span> (ê½ƒì„ ë³´ë©°) "ê½ƒì•„, ë„ˆëŠ” ì™œ ë²Œë“¤í•œí…Œ ë§›ìˆëŠ” ê¿€ì„ ê³µì§œë¡œ ì£¼ëŠ” ê±°ì•¼? ì•„ê¹ì§€ ì•Šì•„?"</p>
                    <p class="mb-2"><span class="font-bold text-yellow-600">ë²Œ:</span> (ì§€ë‚˜ê°€ë©°) "ë¶•~ ë¶•~ ê³µì§œê°€ ì•„ë‹ˆì•¼, ìœ¨ì•„!"</p>
                    <p><span class="font-bold text-sky-500">ìœ¨ì´:</span> "ì–´? ë²Œì´ ë§ì„ í•˜ë„¤? ì •ë§ ê³µì§œê°€ ì•„ë‹ˆë¼ê³ ?"</p>
                `
            },
            {
                type: 'story',
                image: 'images/nectar3.jpg',
                title: '2ì¥: ë¾°ë¡œë¡±! ìœ¨ì´ê°€ ë²Œì´ ë˜ì—ˆì–´ìš”!',
                sub: '(ê°‘ìê¸° ëª¸ì´ ì½©ì•Œë§Œí¼ ì‘ì•„ì¡Œì–´ìš”!)',
                content: `
                    <p class="mb-2"><span class="font-bold text-sky-500">ìœ¨ì´:</span> (ìê¸° ì†ì„ ë³´ë©°) "ìš°ì™€ì•…! ë‚´ ëª¸ì´ ì‘ì•„ì¡Œì–´! ë“± ë’¤ì— ë‚ ê°œë„ ìƒê²¼ë„¤? ë‚´ê°€ ê¿€ë²Œì´ ëœ ê±°ì•¼?"</p>
                    <p class="mb-2"><span class="font-bold text-yellow-600">ê¿€ë²Œ ì¹œêµ¬:</span> "ì•ˆë…•, ìœ¨ì•„! ê½ƒì´ ì™œ ê¿€ì„ ì£¼ëŠ”ì§€ ë‚´ê°€ ì§ì ‘ ë³´ì—¬ì¤„ê²Œ. ë‚˜ë¥¼ ë”°ë¼ì™€!"</p>
                    <p><span class="font-bold text-sky-500">ìœ¨ì´:</span> "ì‹ ë‚œë‹¤! ë¶•ë¶•~ ë‚ ì•„ë³´ì!"</p>
                `
            },
            {
                type: 'story',
                image: 'images/nectar4.jpg',
                title: '3ì¥: ë§›ìˆëŠ” ê¿€ ì‹ë‹¹',
                sub: '(ê½ƒ ì•ˆìª½ ê¹Šì€ ê³³)',
                content: `
                    <p class="mb-2"><span class="font-bold text-yellow-600">ê¿€ë²Œ ì¹œêµ¬:</span> "ì, ê½ƒë‹˜ì´ ì°¨ë ¤ë†“ì€ ì‹íƒì„ ë´. ë‹¬ì½¤í•œ ê¿€ì´ ê°€ë“í•˜ì§€?"</p>
                    <p class="mb-2"><span class="font-bold text-pink-500">ê½ƒë‹˜:</span> "ì–´ì„œ ì™€! ë°°ê³ í”„ì§€? ë‚´ê°€ ë§Œë“  ë‹¬ì½¤í•œ ê¿€ì„ ë§ˆìŒê» ë¨¹ìœ¼ë ´!"</p>
                    <p class="mb-2"><span class="font-bold text-sky-500">ìœ¨ì´:</span> (ê¿€ì„ ê¿€êº½) "ìš°ì™€! ì‚¬íƒ•ë³´ë‹¤ í›¨ì”¬ ë‹¬ì½¤í•´! ê½ƒë‹˜ì•„, ì •ë§ ì´ê±¸ ê·¸ëƒ¥ ë¨¹ì–´ë„ ë¼?"</p>
                    <p><span class="font-bold text-pink-500">ê½ƒë‹˜:</span> "ê·¸ëŸ¼~ ë§ì´ ë¨¹ê³  í˜ë‚´ë ´!"</p>
                `
            },
            {
                type: 'story',
                image: 'images/nectar5.jpg',
                title: '4ì¥: ë…¸ë€ ê°€ë£¨ì˜ ë¹„ë°€',
                content: `
                    <p class="mb-2"><span class="font-bold text-sky-500">ìœ¨ì´:</span> "ì–´? ê¿€ì„ ë¨¹ë‹¤ ë³´ë‹ˆ ë‚´ í„¸ë³µìˆ­ì´ ë°°ì— ë…¸ë€ ê°€ë£¨ê°€ ì”ëœ© ë¬»ì—ˆì–´. ì—ì´ ì§€ì§€~ í„¸ì–´ë²„ë ¤ì•¼ì§€."</p>
                    <p class="mb-2"><span class="font-bold text-yellow-600">ê¿€ë²Œ ì¹œêµ¬:</span> (ë‹¤ê¸‰í•˜ê²Œ) "ì ê¹! ìœ¨ì•„, í„¸ë©´ ì•ˆ ë¼! ê·¸ê±´ ì†Œì¤‘í•œ <strong class='text-orange-500'>'ê½ƒê°€ë£¨'</strong>ì•¼."</p>
                    <p class="mb-2"><span class="font-bold text-sky-500">ìœ¨ì´:</span> "ê½ƒê°€ë£¨? ì´ê²Œ ì™œ ì†Œì¤‘í•´?"</p>
                    <p><span class="font-bold text-yellow-600">ê¿€ë²Œ ì¹œêµ¬:</span> "ê·¸ê²Œ ë°”ë¡œ ìš°ë¦¬ê°€ <strong class='text-red-500'>ë°¥ê°’</strong>ì„ í•˜ëŠ” ë°©ë²•ì´ê±°ë“ . ì˜†ì— ìˆëŠ” ë‹¤ë¥¸ ê½ƒìœ¼ë¡œ ê°€ë³´ì!"</p>
                `
            },
            {
                type: 'story',
                image: 'images/nectar6.jpg',
                title: '5ì¥: ê½ƒê°€ë£¨ ë°°ë‹¬ë¶€ ìœ¨ì´',
                content: `
                    <p class="mb-2"><span class="font-bold text-gray-500">ğŸ“¢</span> ìœ¨ì´ê°€ ë‹¤ë¥¸ ê½ƒìœ¼ë¡œ ì´ì‚¬ ê°€ì, ëª¸ì— ë¬»ì€ ê½ƒê°€ë£¨ê°€ ì˜®ê²¨ì¡Œì–´ìš”.</p>
                    <p class="mb-2"><span class="font-bold text-yellow-600">ê¿€ë²Œ ì¹œêµ¬:</span> "ë³´ì•˜ì§€? ë„¤ê°€ ì˜®ê²¨ì¤€ ê½ƒê°€ë£¨ ë•ë¶„ì— ê½ƒì€ ë‚˜ì¤‘ì— <strong class='text-green-600'>ì”¨ì•—ê³¼ ì—´ë§¤</strong>ë¥¼ ë§ºì„ ìˆ˜ ìˆì–´."</p>
                    <p class="mb-2"><span class="font-bold text-sky-500">ìœ¨ì´:</span> "ì•„í•˜! ê½ƒì€ ë‹¤ë¦¬ê°€ ì—†ì–´ì„œ ìš°ë¦¬í•œí…Œ ê¿€ì„ ì£¼ê³  <strong class='text-blue-600'>ê½ƒê°€ë£¨ ë°°ë‹¬</strong>ì„ ì‹œí‚¤ëŠ” ê±°êµ¬ë‚˜!"</p>
                    <p><span class="font-bold text-pink-500">ê½ƒë‹˜:</span> "ë§ì•„! ì •ë§ ê³ ë§ˆì›Œ!"</p>
                `
            },
            {
                type: 'story',
                image: 'images/nectar7.jpg',
                title: '6ì¥: ì•ˆë…•, ì¹œêµ¬ë“¤!',
                sub: '(ë‹¤ì‹œ í•™êµ í™”ë‹¨ ì•)',
                content: `
                    <p class="mb-2"><span class="font-bold text-gray-500">ğŸ“¢</span> í‘! ìœ¨ì´ëŠ” ë‹¤ì‹œ ì”©ì”©í•œ 1í•™ë…„ í•™ìƒìœ¼ë¡œ ëŒì•„ì™”ì–´ìš”.</p>
                    <p class="mb-2"><span class="font-bold text-sky-500">ìœ¨ì´:</span> "ê½ƒì´ë‘ ë²Œì€ ì„œë¡œ ë•ëŠ” ë‹¨ì§ ì¹œêµ¬ì˜€êµ¬ë‚˜! ê½ƒì€ ê¿€ì„ ì£¼ê³ , ë²Œì€ ê½ƒê°€ë£¨ë¥¼ ë°°ë‹¬í•˜ê³ !"</p>
                    <p class="mb-2"><span class="font-bold text-sky-500">ìœ¨ì´:</span> "ì¹œêµ¬ë“¤ì•„ ê³ ë§ˆì›Œ! ë‚˜ ì´ì œ í† ë¸Œ ê°€ì•¼ í•´, ì•ˆë…•!"</p>
                `
            },
            {
                type: 'quiz_intro',
                image: 'images/nectar8.jpg',
                title: 'ìœ¨ì´ì˜ OX í€´ì¦ˆ!',
                content: `
                    <p class="mb-4 text-center text-lg">"ì ê¹! ê·¸ëƒ¥ ê°€ë©´ ì„­ì„­í•˜ì§€?"</p>
                    <p class="text-center text-gray-600">ìœ¨ì´ê°€ ë°°ìš´ ë‚´ìš©ì„ í€´ì¦ˆë¡œ ë‚¼ê²Œìš”.<br>3ë¬¸ì œë¥¼ ëª¨ë‘ ë§í˜€ë³´ì„¸ìš”!</p>
                `
            },
            {
                type: 'ending',
                image: 'images/nectar0.jpg', // í‘œì§€ ì´ë¯¸ì§€ ì¬ì‚¬ìš© í˜¹ì€ nectar9.jpg
                alt: 'ë'
            }
        ];

        const quizData = [
            {
                question: "ê½ƒì´ ë²Œì—ê²Œ ê¿€ì„ ì£¼ëŠ” ì´ìœ ëŠ” ê½ƒì´ ë„ˆë¬´ë„ˆë¬´ ì°©í•´ì„œ, ê·¸ëƒ¥ ì„ ë¬¼ë¡œ ì£¼ëŠ” ê²ƒì´ë‹¤?",
                answer: false,
                explanation: "ê½ƒì€ ì°©í•˜ê¸°ë„ í•˜ì§€ë§Œ, ì‚¬ì‹¤ì€ ì›€ì§ì¼ ìˆ˜ ì—†ëŠ” ìì‹ ì„ ëŒ€ì‹ í•´ì„œ ê½ƒê°€ë£¨ë¥¼ ì˜®ê²¨ë‹¬ë¼ê³  'ì‹¬ë¶€ë¦„ ê°’'ìœ¼ë¡œ ê¿€ì„ ì£¼ëŠ” ê±°ì•¼!"
            },
            {
                question: "ë²Œì˜ ëª¸ì— ë¬»ì€ ë…¸ë€ ê°€ë£¨ëŠ” ë”ëŸ¬ìš´ ë¨¼ì§€ë‹ˆê¹Œ ê¹¨ë—ì´ í„¸ì–´ë‚´ì•¼ í•œë‹¤?",
                answer: false,
                explanation: "ì•ˆ ë¼! ê·¸ê±´ ì†Œì¤‘í•œ 'ê½ƒê°€ë£¨'ì•¼. ê·¸ ê°€ë£¨ê°€ ë‹¤ë¥¸ ê½ƒì˜ ì•”ìˆ ì— ë‹¿ì•„ì•¼ ì”¨ì•—ì´ ìƒê¸°ê³  ë§›ìˆëŠ” ì—´ë§¤ë„ ì—´ë¦¬ê±°ë“ ."
            },
            {
                question: "ê½ƒì€ ê¿€ì„ ì£¼ê³ , ë²Œì€ ê½ƒê°€ë£¨ë¥¼ ì˜®ê²¨ì¤€ë‹¤. ë‘˜ì€ ì„œë¡œ ë•ëŠ” ì‚¬ì´ê°€ ë§ë‹¤?",
                answer: true,
                explanation: "ë”©ë™ëŒ•! ê½ƒì€ ë²Œì—ê²Œ ë¨¹ì´ë¥¼ ì£¼ê³ , ë²Œì€ ê½ƒì´ ì•„ê¸°(ì”¨ì•—)ë¥¼ ë‚³ê²Œ ë„ì™€ì£¼ëŠ” ì•„ì£¼ ì¹œí•œ ë‹¨ì§ ì¹œêµ¬ ì‚¬ì´ë€ë‹¤."
            }
        ];

        // ìƒíƒœ ê´€ë¦¬
        let currentState = {
            pageIndex: 0,
            quizIndex: 0,
            quizStatus: 'question', // question, result, explanation
            lastAnswer: null
        };

        const app = document.getElementById('app');

        // ë©”ì¸ ë Œë”ë§ í•¨ìˆ˜
        function render() {
            app.innerHTML = ''; 
            
            // 1. í€´ì¦ˆ í˜ì´ì§€ê°€ ì•„ë‹Œ ê²½ìš° (ìŠ¤í† ë¦¬, í‘œì§€, ì—”ë”©)
            if (currentState.pageIndex < storyData.length) {
                const page = storyData[currentState.pageIndex];
                
                if (page.type === 'cover') {
                    renderCover(page);
                } else if (page.type === 'ending') {
                    renderEnding(page);
                } else if (page.type === 'quiz_intro') {
                    renderStoryPage(page, true);
                } else {
                    renderStoryPage(page, false);
                }
            } 
            // 2. í€´ì¦ˆ ì§„í–‰ ì¤‘
            else if (currentState.pageIndex === storyData.length) {
                renderQuiz();
            }
        }

        // --- í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë“¤ ---

        function renderCover(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = nextPage;
            div.innerHTML = `
                <div class="img-container">
                    <img src="${data.image}" class="img-cover" alt="${data.alt}" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full bg-yellow-200 flex flex-col items-center justify-center text-yellow-800 text-2xl font-comic\\'><span class=\\'text-6xl mb-4\\'>ğŸŒ¸ğŸ</span><h1>ê½ƒì€ ì™œ<br>ê¿€ì„ ë§Œë“¤ê¹Œ?</h1><p class=\\'text-sm mt-8 animate-pulse\\'>í™”ë©´ì„ í„°ì¹˜í•˜ì„¸ìš”</p></div>'">
                </div>
                <div class="absolute bottom-10 w-full text-center text-white font-comic animate-pulse text-xl drop-shadow-md bg-black/20 py-2">
                    í™”ë©´ì„ íƒ­í•˜ì—¬ ì‹œì‘í•˜ê¸°
                </div>
            `;
            app.appendChild(div);
        }

        function renderStoryPage(data, isQuizIntro) {
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-white fade-in";
            
            // ì´ë¯¸ì§€ ì˜ì—­ (flex-1)
            const imgHtml = `
                <div class="flex-1 img-container relative border-b-4 border-yellow-400">
                    <img src="${data.image}" class="img-fit" alt="ì‚½í™”" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full bg-yellow-50 flex items-center justify-center text-gray-400\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'">
                </div>
            `;

            // í…ìŠ¤íŠ¸ ë° ì»¨íŠ¸ë¡¤ ì˜ì—­ (h-[35%] ìœ ì§€)
            const textHtml = `
                <div class="h-[35%] flex flex-col relative">
                    <div class="flex-1 p-6 overflow-y-auto text-box -mt-6 z-10 text-lg leading-relaxed text-gray-800">
                        ${data.title ? `<h2 class="font-comic text-2xl text-pink-600 mb-1">${data.title}</h2>` : ''}
                        ${data.sub ? `<p class="text-sm text-gray-500 mb-4">${data.sub}</p>` : ''}
                        <div class="space-y-2">
                            ${data.content}
                        </div>
                    </div>
                    
                    <div class="h-20 bg-white flex justify-between items-center px-8 border-t border-yellow-100 z-20 shadow-[0_-4px_10px_rgba(0,0,0,0.05)]">
                        <div onclick="prevPage()" class="flex flex-col items-center cursor-pointer text-gray-400 hover:text-gray-600 transition">
                            <span class="text-3xl filter grayscale opacity-50">ğŸƒ</span>
                            <span class="text-xs font-bold mt-1">ì´ì „</span>
                        </div>
                        
                        ${isQuizIntro ? 
                            `<div onclick="startQuiz()" class="btn-quiz flex flex-col items-center cursor-pointer text-sky-600">
                                <div class="w-14 h-14 bg-sky-500 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-sky-200">?</div>
                                <span class="text-xs font-bold mt-1 text-sky-600">í€´ì¦ˆ ì‹œì‘!</span>
                            </div>` 
                            : 
                            `<div onclick="nextPage()" class="btn-honey flex flex-col items-center text-orange-500">
                                <span class="text-4xl filter drop-shadow-md">ğŸ</span>
                                <span class="text-xs font-bold mt-1 text-orange-600">ë‹¤ìŒ</span>
                            </div>`
                        }
                    </div>
                </div>
            `;
            
            div.innerHTML = imgHtml + textHtml;
            app.appendChild(div);
        }

        function renderQuiz() {
            if (currentState.quizIndex >= quizData.length) {
                currentState.pageIndex = storyData.length - 1; // ì—”ë”© í˜ì´ì§€ë¡œ
                currentState.quizIndex = 0;
                render();
                return;
            }

            const currentQ = quizData[currentState.quizIndex];
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-yellow-50 fade-in";

            let contentHtml = '';

            // ìƒíƒœ 1: ë¬¸ì œ í’€ê¸°
            if (currentState.quizStatus === 'question') {
                contentHtml = `
                    <div class="flex-1 flex flex-col items-center justify-center p-6 text-center">
                        <span class="text-pink-500 font-bold text-xl mb-4 bg-pink-100 px-4 py-1 rounded-full">ë¬¸ì œ ${currentState.quizIndex + 1} / 3</span>
                        <div class="bg-white p-8 rounded-2xl shadow-xl w-full mb-8 border-2 border-yellow-300">
                            <p class="text-2xl font-bold leading-normal break-keep text-gray-800">${currentQ.question}</p>
                        </div>
                        <div class="flex gap-6 w-full justify-center">
                            <button onclick="checkAnswer(true)" class="w-24 h-24 bg-blue-500 rounded-full text-white text-5xl font-black shadow-lg hover:bg-blue-600 active:scale-95 transition border-4 border-blue-300">O</button>
                            <button onclick="checkAnswer(false)" class="w-24 h-24 bg-red-500 rounded-full text-white text-5xl font-black shadow-lg hover:bg-red-600 active:scale-95 transition border-4 border-red-300">X</button>
                        </div>
                    </div>
                    <div class="h-20 bg-white border-t border-gray-200 flex items-center px-4">
                        <button onclick="exitQuiz()" class="text-gray-400 font-bold text-sm">â—€ ëŒì•„ê°€ê¸°</button>
                    </div>
                `;
            } 
            // ìƒíƒœ 2: ê²°ê³¼
            else if (currentState.quizStatus === 'result') {
                const isCorrect = currentState.lastAnswer === currentQ.answer;
                const emoji = isCorrect ? 'ğŸ‰ğŸğŸ‰' : 'ğŸŒ¸ğŸ¤”ğŸŒ¸'; 
                const bgColor = isCorrect ? 'bg-green-500' : 'bg-orange-400';
                const message = isCorrect ? 'ì •ë‹µì…ë‹ˆë‹¤!' : 'í‹€ë ¸ì–´ìš”!';

                contentHtml = `
                    <div class="w-full h-full ${bgColor} flex flex-col items-center justify-center text-white cursor-pointer" onclick="showExplanation()">
                        <div class="text-8xl mb-6 animate-bounce">${emoji}</div>
                        <h2 class="text-4xl font-comic mb-4 drop-shadow-md">${message}</h2>
                        <p class="animate-pulse text-lg opacity-90">í™”ë©´ì„ íƒ­í•˜ì—¬ í•´ì„¤ ë³´ê¸°</p>
                    </div>
                `;
            }
            // ìƒíƒœ 3: í•´ì„¤
            else if (currentState.quizStatus === 'explanation') {
                const isLastQuestion = currentState.quizIndex === quizData.length - 1;
                const nextButtonText = isLastQuestion ? "ëª¨í—˜ ë§ˆì¹˜ê¸°" : "ë‹¤ìŒ ë¬¸ì œë¡œ";

                contentHtml = `
                    <div class="flex-1 flex flex-col p-6 bg-white cursor-pointer" onclick="nextQuizStep()">
                        <div class="flex-1 flex flex-col justify-center items-center">
                            <h3 class="text-2xl font-comic text-sky-600 mb-6">ğŸ‘§ğŸ» ìœ¨ì´ì˜ í•´ì„¤</h3>
                            <div class="bg-sky-50 p-6 rounded-xl border-2 border-sky-200 shadow-md w-full relative">
                                <div class="absolute -top-4 -left-2 text-4xl">ğŸ’¡</div>
                                <p class="text-xl font-medium text-gray-800 leading-relaxed mt-2 word-keep">
                                    "${currentQ.explanation}"
                                </p>
                            </div>
                        </div>
                        <div class="h-24 w-full flex items-center justify-center">
                            <div class="btn-honey flex flex-col items-center">
                                <span class="text-4xl">ğŸ</span>
                                <span class="text-sm font-bold text-orange-600 mt-1">${nextButtonText}</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            div.innerHTML = contentHtml;
            app.appendChild(div);
        }

        function renderEnding(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = restart;
            div.innerHTML = `
                <div class="img-container">
                    <img src="${data.image}" class="img-cover" alt="ë" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full bg-green-100 flex flex-col items-center justify-center text-green-800\\'><span class=\\'text-6xl mb-4\\'>ğŸ«</span><p>ì—¬í–‰ì´ ëë‚¬ìŠµë‹ˆë‹¤</p></div>'">
                </div>
                <div class="absolute bottom-10 w-full text-center text-white font-comic animate-pulse text-xl bg-black/40 py-2">
                    ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸° â†º
                </div>
            `;
            app.appendChild(div);
        }

        // --- ë¡œì§ í•¨ìˆ˜ë“¤ ---

        function nextPage() {
            if (currentState.pageIndex < storyData.length) {
                currentState.pageIndex++;
                render();
            }
        }

        function prevPage() {
            if (currentState.pageIndex > 0) {
                currentState.pageIndex--;
                render();
            }
        }

        function startQuiz() {
            currentState.pageIndex = storyData.length; 
            currentState.quizIndex = 0;
            currentState.quizStatus = 'question';
            render();
        }

        function exitQuiz() {
            currentState.pageIndex--; 
            render();
        }

        function checkAnswer(userAnswer) {
            currentState.lastAnswer = userAnswer;
            currentState.quizStatus = 'result';
            render();
        }

        function showExplanation() {
            currentState.quizStatus = 'explanation';
            render();
        }

        function nextQuizStep() {
            currentState.quizIndex++;
            currentState.quizStatus = 'question';
            render();
        }

        function restart() {
            currentState.pageIndex = 0;
            currentState.quizIndex = 0;
            render();
        }

        // ì´ˆê¸° ì‹¤í–‰
        render();

    </script>
</body>
</html>
