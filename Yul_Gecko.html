<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìœ¨ì´ì˜ ê°€ì¡±ì—¬í–‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #fff7ed; overflow: hidden; touch-action: manipulation; }
        .font-comic { font-family: 'Jua', sans-serif; }
        @keyframes float { 0% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-5px) rotate(5deg); } 100% { transform: translateY(0px) rotate(0deg); } }
        .btn-theme { animation: float 2.5s infinite ease-in-out; cursor: pointer; transition: all 0.2s; }
        .btn-theme:active { transform: scale(0.9); }
        .text-box { background-color: rgba(255, 255, 255, 0.98); border-radius: 20px 20px 0 0; box-shadow: 0 -4px 15px rgba(0,0,0,0.1); }
        .img-container { width: 100%; height: 100%; background-color: #fef3c7; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .img-cover { width: 100%; height: 100%; object-fit: cover; }
        .img-fit { width: 100%; height: 100%; object-fit: contain; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* ìºë¦­í„° ìƒ‰ìƒ ì§€ì • */
        .char-baekhap { color: #15803d; font-weight: 700; } /* green-700 */
        .char-joyul { color: #0ea5e9; font-weight: 700; }    /* sky-500 */
        
        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (ê¹”ë”í•œ í…ìŠ¤íŠ¸ë·°) */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col justify-center items-center">
    <div id="app" class="w-full h-full max-w-md bg-white relative shadow-2xl overflow-hidden flex flex-col border-x border-orange-100"></div>
    <script>
        // *** AI ë°ì´í„° ìƒì„± ì˜ì—­ ***
        // ì´ë¯¸ì§€ í‚¤ì›Œë“œ: baekhap
        // êµ¬ì¡°: í‘œì§€(0) -> ë“±ì¥ì¸ë¬¼(1) -> 1~6ì¥(2~7) -> í€´ì¦ˆì¸íŠ¸ë¡œ(8) -> ì—”ë”©(9)
        
        const storyData = [
            // 0. í‘œì§€
            {
                type: 'cover',
                image: 'images/baekhap0.jpg',
                title: 'ì•ˆë…•, ìœ¨ì´ì•¼! ë‚œ ë°±í•©ì´ì•¼!'
            },
            // 1. ë“±ì¥ì¸ë¬¼ ì†Œê°œ
            {
                type: 'story',
                image: 'images/baekhap1.jpg',
                title: 'ë“±ì¥ì¸ë¬¼ ì†Œê°œ',
                content: `
                    <div class="space-y-4">
                        <div class="bg-green-50 p-4 rounded-xl border-2 border-green-200 shadow-sm">
                            <span class="text-2xl">ğŸ¦</span> <strong class="text-green-700 text-xl font-comic">ë°±í•©</strong>
                            <p class="text-sm text-gray-700 mt-2 leading-snug">2025ë…„ 10ì›” 12ì¼ì— íƒœì–´ë‚œ ì•„ê¸° í¬ë ˆìŠ¤í‹°ë“œ ê²Œì½”(ë¦´ë¦¬ í™”ì´íŠ¸). í˜„ì¬ ëª¸ë¬´ê²Œ 2g. ì•„ë¹  'ì†Œê¸ˆ'ê³¼ ì—„ë§ˆ 'ì¹˜ì¦ˆ' ì‚¬ì´ì—ì„œ íƒœì–´ë‚¨.</p>
                        </div>
                        <div class="bg-sky-50 p-4 rounded-xl border-2 border-sky-200 shadow-sm">
                            <span class="text-2xl">ğŸ‘§ğŸ»</span> <strong class="text-sky-600 text-xl font-comic">ì¡°ìœ¨</strong>
                            <p class="text-sm text-gray-700 mt-2 leading-snug">ë°±í•©ì´ë¥¼ ì‚¬ë‘í•˜ëŠ” ì²­ê³ ì´ˆë“±í•™êµ 1í•™ë…„ ë©‹ì§„ ì†Œë…€.</p>
                        </div>
                    </div>
                `
            },
            // 2. ì œ1ì¥ (ì»·1 + ì»·2 í†µí•©)
            {
                type: 'story',
                image: 'images/baekhap2.jpg',
                title: 'ì œ1ì¥: ë°˜ê°€ì›Œ, ë‚œ ë°±í•©ì´ì•¼!',
                sub: 'ì²« ë§Œë‚¨ê³¼ ì†Œê°œ',
                content: `
                    <p class="mb-3"><span class="char-baekhap">ë°±í•©:</span> ì•ˆë…•, ì¡°ìœ¨ì•„! ë§Œë‚˜ì„œ ë°˜ê°€ì›Œ. ë‚œ ë„ˆì˜ ê²Œì½” ë°±í•©ì´ì•¼!</p>
                    <p><span class="char-baekhap">ë°±í•©:</span> ë‚œ 2025ë…„ 10ì›” 12ì¼ì— íƒœì–´ë‚¬ì–´. ë©‹ì§„ ì•„ë¹  'ì†Œê¸ˆ'ì´ì™€ ì˜ˆìœ ì—„ë§ˆ 'ì¹˜ì¦ˆ' ì‚¬ì´ì—ì„œ íƒœì–´ë‚¬ì–´. ì–´? ì•Œê³  ìˆì—ˆì–´? ì§€ê¸ˆ ë‚´ ëª¸ë¬´ê²ŒëŠ” 2gìœ¼ë¡œ ì•„ì£¼ ì‘ê³  ê°€ë²¼ì›Œ!</p>
                `
            },
            // 3. ì œ2ì¥ (ì»·3 + ì»·4 í†µí•©)
            {
                type: 'story',
                image: 'images/baekhap3.jpg',
                title: 'ì œ2ì¥: ë‚´ê°€ ì‚¬ëŠ” ê³³ê³¼ ì¢‹ì•„í•˜ëŠ” ë‚ ì”¨',
                sub: 'í™˜ê²½ê³¼ ì˜¨ë„',
                content: `
                    <p class="mb-3"><span class="char-baekhap">ë°±í•©:</span> ë‚œ ì›ë˜ 'ë‰´ì¹¼ë ˆë„ë‹ˆì•„'ë¼ëŠ” ì„¬ì˜ ìˆ²ì†ì—ì„œ ì™”ì–´. ë¥ì§€ë„ ì¶¥ì§€ë„ ì•Šì€ 22ë„ì—ì„œ 26ë„ ì‚¬ì´ë¥¼ ê°€ì¥ ì¢‹ì•„í•´. 30ë„ê°€ ë„˜ëŠ” ì°œí†µë”ìœ„ëŠ” ì •ë§ ìœ„í—˜í•´!</p>
                    <p><span class="char-baekhap">ë°±í•©:</span> ê·¸ë¦¬ê³  ë‚œ ì´‰ì´‰í•œ ê²Œ ì¢‹ì•„. í•˜ë£¨ì— í•œë‘ ë²ˆ ë¶„ë¬´ê¸°ë¡œ ë¬¼ì„ ë¿Œë ¤ì£¼ë©´ ìŠµë„ë„ ë§ì¶°ì§€ê³ , ë‚´ê°€ ëª©ë§ˆë¥¼ ë•Œ ìì— ë§ºíŒ ë¬¼ì„ ë§ˆì‹¤ ìˆ˜ ìˆì–´.</p>
                `
            },
            // 4. ì œ3ì¥ (ì»·5 + ì»·6 í†µí•©)
            {
                type: 'story',
                image: 'images/baekhap4.jpg',
                title: 'ì œ3ì¥: ë‚´ ëª¸ì˜ ë¹„ë°€',
                sub: 'ë°œë°”ë‹¥ê³¼ ëˆˆ',
                content: `
                    <p class="mb-3"><span class="char-baekhap">ë°±í•©:</span> ì§œì”! ë‚œ ìŠ¤íŒŒì´ë”ë§¨ì²˜ëŸ¼ ë²½ì„ íƒˆ ìˆ˜ ìˆì–´. ë‚´ ë°œë°”ë‹¥ì—ëŠ” ëˆˆì— ì•ˆ ë³´ì´ëŠ” ì•„ì£¼ ì‘ì€ í„¸ë“¤ì´ ìˆ˜ë°±ë§Œ ê°œë‚˜ ìˆê±°ë“ . ì´ í„¸ë“¤ì´ ìì„ì´ë‚˜ ì°ì°ì´ í…Œì´í”„ì²˜ëŸ¼ ë²½ì— ì°©! ë‹¬ë¼ë¶™ê²Œ í•´ì¤˜. ì‚¬ëŒë“¤ì€ ì´ê²Œ ë°˜ë°ë¥´ë°œìŠ¤ í˜ ë•Œë¬¸ì´ë¼ë˜ë°? ê·¸ê²Œ ë­”ì§€ ê¶ê¸ˆí•˜ë©´ ì•„ë¹ ê»˜ ì—¬ì­¤ë´. ë‚œ ëª¨ë¥´ê±°ë“ !</p>
                    <p><span class="char-baekhap">ë°±í•©:</span> ë‚´ ëˆˆì„ ì˜ ë´. ë‚œ ëˆˆêº¼í’€ì´ ì—†ì–´ì„œ ëˆˆì„ ê¹œë¹¡ì¼ ìˆ˜ ì—†ì–´. ëŒ€ì‹  íˆ¬ëª…í•œ ì•ˆê²½ ê°™ì€ ë§‰ì´ ëˆˆì„ ë³´í˜¸í•´ì£¼ì§€. ëˆˆì´ ê±´ì¡°í•˜ê±°ë‚˜ ë¨¼ì§€ê°€ ë¬»ìœ¼ë©´ ì´ë ‡ê²Œ í˜€ë¡œ ì‹¹ì‹¹ ë‹¦ì•„!</p>
                `
            },
            // 5. ì œ4ì¥ (ì»·7 + ì»·8 í†µí•©)
            {
                type: 'story',
                image: 'images/baekhap5.jpg',
                title: 'ì œ4ì¥: ì†Œì¤‘í•œ ë‚´ ê¼¬ë¦¬',
                sub: 'ê¼¬ë¦¬ íŠ¹ì§•ê³¼ ì£¼ì˜ì‚¬í•­',
                content: `
                    <p class="mb-3"><span class="char-baekhap">ë°±í•©:</span> ì¡°ìœ¨ì•„, ì´ê±´ ì •ë§ ì¤‘ìš”í•œ ë¹„ë°€ì¸ë°... ë‚´ ê¼¬ë¦¬ë¥¼ ì¡ì•„ë‹¹ê¸°ê±°ë‚˜ ë‚  ë„ˆë¬´ ë†€ë¼ê²Œ í•˜ë©´ ì•ˆ ë¼! ë¬´ì„œìš´ ì ì´ ë‚˜íƒ€ë‚˜ë©´ ë‚œ ê¼¬ë¦¬ë¥¼ ëš ìë¥´ê³  ë„ë§ê°€ê±°ë“ .</p>
                    <p><span class="char-baekhap">ë°±í•©:</span> ë‹¤ë¥¸ ë„ë§ˆë±€ ì¹œêµ¬ë“¤ì€ ê¼¬ë¦¬ê°€ ë‹¤ì‹œ ìë¼ê¸°ë„ í•˜ì§€ë§Œ, ë‚´ ê¼¬ë¦¬ëŠ” í•œ ë²ˆ ì˜ë¦¬ë©´ ë‹¤ì‹œëŠ” ìë¼ì§€ ì•Šì•„. ê¼¬ë¦¬ê°€ ì—†ì–´ë„ ì‚¬ëŠ” ë°ëŠ” ë¬¸ì œì—†ì§€ë§Œ, ê·¸ë˜ë„ ë‚´ ì˜ˆìœ ê¼¬ë¦¬ë¥¼ ì§€ì¼œì¤˜!</p>
                `
            },
            // 6. ì œ5ì¥ (ì»·9 + ì»·10 í†µí•©)
            {
                type: 'story',
                image: 'images/baekhap6.jpg',
                title: 'ì œ5ì¥: ì‘¥ì‘¥ ìë¼ë©´?',
                sub: 'ì„±ì¥ê³¼ ì„±ë³„',
                content: `
                    <p class="mb-3"><span class="char-baekhap">ë°±í•©:</span> ì§€ê¸ˆì€ 2g ê¼¬ê¼¬ë§ˆì§€ë§Œ, ë°¥ ì˜ ë¨¹ê³  1ë…„ì—ì„œ 1ë…„ ë°˜ ì •ë„ ì§€ë‚˜ë©´ 40gì—ì„œ 50gì´ë‚˜ ë‚˜ê°€ëŠ” ë©‹ì§„ ì–´ë¥¸ì´ ëœë‹¨ë‹¤! ì•„ì£¼ ì‘¥ì‘¥ í¬ì§€?</p>
                    <p><span class="char-baekhap">ë°±í•©:</span> ë‚´ê°€ ë‚¨ì(ìˆ˜ì»·)ì¸ì§€ ì—¬ì(ì•”ì»·)ì¸ì§€ëŠ” ì§€ê¸ˆì€ ì•Œ ìˆ˜ ì—†ì–´. ë‚´ê°€ ì¢€ ë” ìë¼ì„œ 6ê°œì›”ì—ì„œ 1ë…„ì¯¤ ì§€ë‚˜ì•¼ ì•Œ ìˆ˜ ìˆë‹¨ë‹¤. ë‹ë³´ê¸°ë¡œ ë´¤ì„ ë•Œ ë’·ë‹¤ë¦¬ ì‚¬ì´ì— êµ¬ë©ë“¤ì´ ë³´ì´ê±°ë‚˜ ë¶ˆë£©í•˜ë©´ ë‚¨ìì•¼!</p>
                `
            },
            // 7. ì œ6ì¥ (ì»·11 + ì»·12 í†µí•©)
            {
                type: 'story',
                image: 'images/baekhap7.jpg',
                title: 'ì œ6ì¥: ëƒ ëƒ  ë§›ìˆëŠ” ë°¥ê³¼ ì£¼ì˜í•  ì ',
                sub: 'ë¨¹ì´ì™€ ëŒë³´ê¸°',
                content: `
                    <p class="mb-3"><span class="char-baekhap">ë°±í•©:</span> ë‚œ ì§€ê¸ˆ ìœ¨ì´ê°€ ì£¼ëŠ” â€˜íŒê²Œì•„â€™ë¥¼ ì œì¼ ì¢‹ì•„í•´. ë¬¼ì— íƒ€ì„œ ì´ìœ ì‹ì²˜ëŸ¼ ì£¼ë©´ ë¼. ê°€ë”ì€ íŠ¼íŠ¼í•´ì§€ë ¤ê³  ê³¤ì¶©ë„ ë¨¹ëŠ”ë°, ê¼­ ì¹¼ìŠ˜ ê°€ë£¨ë¥¼ ë¬»í˜€ì„œ ì¤˜ì•¼ ë¼ˆê°€ íŠ¼íŠ¼í•´ì ¸!</p>
                    <p><span class="char-baekhap">ë°±í•©:</span> ë§ˆì§€ë§‰ìœ¼ë¡œ ë¶€íƒí•´! ë‚  ë§Œì§ˆ ë•ŒëŠ” ë‚´ ëª¸ì„ ê½‰ ì¥ë©´ ì•ˆ ë¼. ë‚´ê°€ ë†€ë¼ì„œ ë„ ë¬¼ê±°ë‚˜ ê¼¬ë¦¬ë¥¼ ìë¥¼ ìˆ˜ë„ ìˆê±°ë“ . ì†ë°”ë‹¥ ìœ„ì— ì‚´í¬ì‹œ ì˜¬ë ¤ë†“ê³  ëˆˆì„ ë§ì¶°ì¤˜. ì˜¤ëŠ˜ë„ í•¸ë“¤ë§ ì˜ ë¶€íƒí•´, ì¡°ìœ¨ì•„!</p>
                `
            },
            // 8. í€´ì¦ˆ ì¸íŠ¸ë¡œ
            {
                type: 'quiz_intro',
                image: 'images/baekhap8.jpg',
                title: 'ë°±í•©ì´ì™€ í•¨ê»˜í•˜ëŠ” O, X í€´ì¦ˆ!',
                sub: 'ì–¼ë§ˆë‚˜ ì˜ ì•Œê²Œ ë˜ì—ˆì„ê¹Œ?',
                content: `<p><span class="char-baekhap">ë°±í•©:</span> ì, ë‚´ ì„¤ëª…ì„ ì˜ ë“¤ì—ˆëŠ”ì§€ í™•ì¸í•´ ë³¼ê¹Œ? 5ë¬¸ì œë¥¼ ë‚¼ í…Œë‹ˆê¹Œ ë§ì¶°ë´!</p>`
            },
            // 9. ì—”ë”©
            {
                type: 'ending',
                image: 'images/baekhap9.jpg',
                title: 'ì—¬í–‰ ì™„ë£Œ!'
            }
        ];

        const quizData = [
            {
                question: "1. ë‚˜ëŠ” ëˆˆêº¼í’€ì´ ìˆì–´ì„œ ì˜ ë•Œ ëˆˆì„ ê°ê³  ì”ë‹¤.",
                answer: false,
                explanation: "ë‚œ ëˆˆêº¼í’€ì´ ì—†ì–´. ì˜ ë•Œë„ ëˆˆì„ ëœ¨ê³  ìì§€. ëŒ€ì‹  í˜€ë¡œ ëˆˆì„ ë‹¦ì•„ì„œ ê¹¨ë—í•˜ê²Œ í•´."
            },
            {
                question: "2. ë‚´ ê¼¬ë¦¬ëŠ” ìœ„ê¸‰í•  ë•Œ ì˜ë¦´ ìˆ˜ ìˆê³ , ì˜ë¦¬ë©´ ë‹¤ì‹œ ì›ë˜ëŒ€ë¡œ ìë¼ë‚œë‹¤.",
                answer: false,
                explanation: "ìœ¼ì•™, ì ˆëŒ€ ì•„ë‹ˆì•¼. ë‚´ ê¼¬ë¦¬ëŠ” í•œ ë²ˆ ì˜ë¦¬ë©´ ë‹¤ì‹œëŠ” ìë¼ì§€ ì•Šì•„. ê·¸ë˜ì„œ ê¼¬ë¦¬ë¥¼ ì¡ì•„ë‹¹ê¸°ë©´ ì ˆëŒ€ ì•ˆ ë¼!"
            },
            {
                question: "3. ë‚˜ëŠ” ë°œë°”ë‹¥ì— ëˆì ëˆì í•œ í’€ì´ ìˆì–´ì„œ ë²½ì— ë¶™ì„ ìˆ˜ ìˆë‹¤.",
                answer: false,
                explanation: "í’€ì´ë‚˜ ë³¸ë“œê°€ ì•„ë‹ˆì•¼. ë‚´ ë°œë°”ë‹¥ì—ëŠ” ëˆˆì— ì•ˆ ë³´ì´ëŠ” ì•„ì£¼ ë¯¸ì„¸í•œ í„¸ë“¤ì´ ìˆì–´ì„œ ìì„ì²˜ëŸ¼ ë²½ì— ì°©! ë¶™ëŠ” ê±°ì•¼. ì‹ ê¸°í•˜ì§€? ì‚¬ëŒë“¤ì€ ë°˜ë°ë¥´ë°œìŠ¤ í˜ì´ ì‘ìš©í•œë‹¤ê³  í•˜ë˜ë°?"
            },
            {
                question: "4. ë‚˜ëŠ” 30ë„ê°€ ë„˜ëŠ” ì•„ì£¼ ë”ìš´ ì—¬ë¦„ ë‚ ì”¨ë¥¼ ì¢‹ì•„í•œë‹¤.",
                answer: false,
                explanation: "ë‚œ ë”ìš´ ê±´ ë”± ì§ˆìƒ‰ì´ì•¼. 22ë„ì—ì„œ 26ë„ ì‚¬ì´ê°€ ê°€ì¥ ì¢‹ì•„. ë„ˆë¬´ ë”ìš°ë©´ ë‚œ ì•„í”Œ ìˆ˜ ìˆì–´."
            },
            {
                question: "5. ë‚˜ëŠ” ì–´ë¥¸ì´ ë˜ë©´ ì§€ê¸ˆ(2g)ë³´ë‹¤ ëª¸ë¬´ê²Œê°€ 20ë°° ë„˜ê²Œ ëŠ˜ì–´ë‚œë‹¤.",
                answer: true,
                explanation: "ì§€ê¸ˆì€ 2gì´ì§€ë§Œ, ë‹¤ í¬ë©´ 40gì´ ë„˜ëŠ” ë“¬ì§í•œ ì–´ë¥¸ì´ ëœë‹¨ë‹¤. ë°¥ ì˜ ë¨¹ê³  ì‘¥ì‘¥ í´ê²Œ!"
            }
        ];
        
        const THEME_EMOJI = "ğŸ¦"; 

        // --- êµ¬ë™ ë¡œì§ ---
        let currentState = { pageIndex: 0, quizIndex: 0, quizStatus: 'question', lastAnswer: null };
        const app = document.getElementById('app');

        function render() {
            app.innerHTML = ''; 
            // pageIndexê°€ ë°ì´í„° ê¸¸ì´ë³´ë‹¤ ì‘ìœ¼ë©´ ì¼ë°˜ í˜ì´ì§€ (í‘œì§€, ìŠ¤í† ë¦¬, ì¸íŠ¸ë¡œ, ì—”ë”© ë“±)
            if (currentState.pageIndex < storyData.length) {
                const page = storyData[currentState.pageIndex];
                if (page.type === 'cover') renderCover(page);
                else if (page.type === 'ending') renderEnding(page);
                else renderStoryPage(page, page.type === 'quiz_intro');
            } 
            // pageIndexê°€ ë°ì´í„° ê¸¸ì´ì™€ ê°™ìœ¼ë©´ í€´ì¦ˆ ëª¨ë“œ ì‹¤í–‰
            else if (currentState.pageIndex === storyData.length) {
                renderQuiz();
            }
        }

        function renderCover(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = nextPage;
            div.innerHTML = `
                <div class="img-container">
                    <img src="${data.image}" class="img-cover" alt="í‘œì§€" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-500\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'">
                </div>
                <div class="absolute bottom-12 w-full text-center">
                     <div class="inline-block bg-black/40 backdrop-blur-sm text-white font-comic animate-pulse text-xl px-6 py-3 rounded-full border border-white/30">
                        <span class="mr-2">${THEME_EMOJI}</span>í™”ë©´ì„ íƒ­í•˜ì—¬ ì‹œì‘í•˜ê¸°
                    </div>
                </div>
            `;
            app.appendChild(div);
        }

        function renderEnding(data) {
            const div = document.createElement('div');
            // í‘œì§€ì™€ ë™ì¼í•œ ì „ì²´í™”ë©´ ìŠ¤íƒ€ì¼ ì ìš©
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = restart; // í´ë¦­ ì‹œ ì²˜ìŒìœ¼ë¡œ
            div.innerHTML = `
                <div class="img-container">
                    <img src="${data.image}" class="img-cover" alt="ì—”ë”©" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-500\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'">
                </div>
                
                <div class="absolute bottom-12 w-full text-center">
                    <div class="inline-block bg-black/40 backdrop-blur-sm text-white font-comic animate-pulse text-xl px-6 py-3 rounded-full border border-white/30">
                        ì—¬í–‰ì™„ë£Œ
                    </div>
                </div>
            `;
            app.appendChild(div);
        }

        function renderStoryPage(data, isQuizIntro) {
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-white fade-in";
            const imgHtml = `<div class="flex-1 img-container relative border-b-4 border-orange-200"><img src="${data.image}" class="img-fit" alt="ì‚½í™”" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-400\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'"></div>`;
            
            const textHtml = `
                <div class="h-[33%] flex flex-col relative bg-[#fff7ed]">
                    <div class="flex-1 p-6 overflow-y-auto no-scrollbar text-box -mt-6 z-10 text-lg leading-relaxed text-gray-800 border-t border-orange-50">
                        ${data.title ? `<h2 class="font-comic text-2xl text-orange-600 mb-1 flex items-center gap-2">${data.title}</h2>` : ''}
                        ${data.sub ? `<p class="text-sm text-gray-500 mb-4 font-bold badge inline-block bg-orange-100 px-2 py-0.5 rounded text-orange-600">ğŸ·ï¸ ${data.sub}</p>` : ''}
                        <div class="space-y-1 font-medium">${data.content}</div>
                    </div>
                    <div class="h-20 bg-[#fff7ed] flex justify-between items-center px-6 border-t border-orange-200 z-20">
                        <div onclick="prevPage()" class="flex flex-col items-center cursor-pointer text-orange-300 hover:text-orange-500 transition"><span class="text-2xl opacity-60">âª</span><span class="text-xs font-bold mt-1">ì´ì „</span></div>
                        ${isQuizIntro ? 
                            `<div onclick="startQuiz()" class="cursor-pointer text-green-600 flex flex-col items-center btn-theme"><div class="w-14 h-14 bg-green-500 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-green-200">?</div><span class="text-xs font-bold mt-1">í€´ì¦ˆ í’€ê¸°!</span></div>` : 
                            `<div onclick="nextPage()" class="btn-theme flex flex-col items-center text-orange-500"><span class="text-4xl filter drop-shadow-md">${THEME_EMOJI}</span><span class="text-xs font-bold mt-1 text-orange-600">ë‹¤ìŒ</span></div>`
                        }
                    </div>
                </div>
            `;
            div.innerHTML = imgHtml + textHtml;
            app.appendChild(div);
        }

        function renderQuiz() {
            // í€´ì¦ˆ ì¢…ë£Œ ì‹œ ë§ˆì§€ë§‰ í˜ì´ì§€(ì—”ë”©, storyData.length - 1)ë¡œ ì´ë™
            if (currentState.quizIndex >= quizData.length) { 
                currentState.pageIndex = storyData.length - 1; 
                render(); 
                return; 
            }

            const currentQ = quizData[currentState.quizIndex];
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-orange-50 fade-in";
            
            if (currentState.quizStatus === 'question') {
                div.innerHTML = `<div class="flex-1 flex flex-col items-center justify-center p-6 text-center"><span class="text-green-600 font-bold text-xl mb-4 bg-green-100 px-4 py-1 rounded-full border border-green-200 shadow-sm">ë¬¸ì œ ${currentState.quizIndex + 1} / ${quizData.length}</span><div class="bg-white p-8 rounded-3xl shadow-xl w-full mb-8 border-4 border-orange-100 relative"><div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-5xl">ğŸ¦</div><p class="text-2xl font-bold break-keep text-gray-800 leading-normal mt-4">${currentQ.question}</p></div><div class="flex gap-6 justify-center"><button onclick="checkAnswer(true)" class="w-24 h-24 bg-blue-500 rounded-full text-white text-5xl font-black shadow-[0_6px_0_rgb(29,78,216)] active:shadow-none active:translate-y-1 transition-all border-4 border-blue-400">O</button><button onclick="checkAnswer(false)" class="w-24 h-24 bg-red-500 rounded-full text-white text-5xl font-black shadow-[0_6px_0_rgb(185,28,28)] active:shadow-none active:translate-y-1 transition-all border-4 border-red-400">X</button></div></div>`;
            } else if (currentState.quizStatus === 'result') {
                const isCorrect = currentState.lastAnswer === currentQ.answer;
                const emoji = isCorrect ? `ğŸ‰${THEME_EMOJI}ğŸ‰` : 'ğŸ¤”ğŸ’¦';
                div.innerHTML = `<div class="w-full h-full ${isCorrect ? 'bg-green-500' : 'bg-orange-400'} flex flex-col items-center justify-center text-white cursor-pointer" onclick="showExplanation()"><div class="text-8xl mb-6 animate-bounce">${emoji}</div><h2 class="text-5xl font-comic mb-4 drop-shadow-md">${isCorrect ? 'ì •ë‹µ!' : 'ë•¡!'}</h2><p class="animate-pulse text-xl opacity-90 font-medium">í™”ë©´ì„ ëˆŒëŸ¬ í•´ì„¤ ë³´ê¸°</p></div>`;
            } else if (currentState.quizStatus === 'explanation') {
                const isLast = currentState.quizIndex === quizData.length - 1;
                div.innerHTML = `<div class="flex-1 flex flex-col p-6 bg-white cursor-pointer" onclick="nextQuizStep()"><div class="flex-1 flex flex-col justify-center items-center"><h3 class="text-2xl font-comic text-green-700 mb-6 flex items-center gap-2">ğŸ¦ ë°±í•©ì´ì˜ í•´ì„¤</h3><div class="bg-green-50 p-6 rounded-2xl border-2 border-green-200 shadow-lg relative w-full"><div class="absolute -top-5 -left-2 text-5xl filter drop-shadow-sm">ğŸ’¡</div><p class="text-xl font-medium text-gray-800 leading-relaxed word-keep pl-2 mt-2">"${currentQ.explanation}"</p></div></div><div class="h-24 flex items-center justify-center"><div class="btn-theme flex flex-col items-center"><span class="text-5xl">${THEME_EMOJI}</span><span class="text-lg font-bold text-orange-600 mt-2">${isLast ? "ê²°ê³¼ ë³´ê¸°!" : "ë‹¤ìŒ ë¬¸ì œ"}</span></div></div></div>`;
            }
            app.appendChild(div);
        }

        function nextPage() { if (currentState.pageIndex < storyData.length) { currentState.pageIndex++; render(); }}
        function prevPage() { if (currentState.pageIndex > 0) { currentState.pageIndex--; render(); }}
        // í€´ì¦ˆ ì‹œì‘ ì‹œ pageIndexë¥¼ ë°°ì—´ ê¸¸ì´(ê°€ìƒ ì¸ë±ìŠ¤)ë¡œ ì„¤ì •
        function startQuiz() { currentState.pageIndex = storyData.length; currentState.quizIndex = 0; currentState.quizStatus = 'question'; render(); }
        function checkAnswer(ans) { currentState.lastAnswer = ans; currentState.quizStatus = 'result'; render(); }
        function showExplanation() { currentState.quizStatus = 'explanation'; render(); }
        function nextQuizStep() { currentState.quizIndex++; currentState.quizStatus = 'question'; render(); }
        function restart() { currentState.pageIndex = 0; currentState.quizIndex = 0; render(); }

        render();
    </script>
</body>
</html>
