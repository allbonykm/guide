<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìœ¨ì´ì˜ ì—­ì‚¬ì—¬í–‰: ì˜¤ë°±ì›ì˜ ì¡°ìƒì„ ì°¾ì•„ì„œ!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f1f5f9; /* Slate-100 */
            color: #334155; /* Slate-700 */
            overflow: hidden;
            touch-action: manipulation;
        }

        .font-comic {
            font-family: 'Jua', sans-serif;
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes poke-right {
            0% { transform: translateX(0) rotate(0deg); }
            50% { transform: translateX(5px) rotate(10deg); }
            100% { transform: translateX(0) rotate(0deg); }
        }
        
        @keyframes poke-left {
            0% { transform: translateX(0) rotate(0deg); }
            50% { transform: translateX(-5px) rotate(-10deg); }
            100% { transform: translateX(0) rotate(0deg); }
        }

        @keyframes shine {
            0% { opacity: 0.8; }
            50% { opacity: 1; text-shadow: 0 0 10px rgba(255, 215, 0, 0.8); }
            100% { opacity: 0.8; }
        }

        .btn-next-coin {
            animation: poke-right 1.5s infinite ease-in-out;
            cursor: pointer;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2));
        }

        .btn-prev-coin {
            animation: poke-left 1.5s infinite ease-in-out;
            cursor: pointer;
            /* íšŒìƒ‰ í•„í„° ì ìš© (ì±„ë„ 0) */
            filter: grayscale(100%) opacity(0.5) drop-shadow(2px 2px 2px rgba(0,0,0,0.1));
        }

        .btn-quiz {
            animation: shine 2s infinite ease-in-out;
        }

        /* í…ìŠ¤íŠ¸ ë°•ìŠ¤ */
        .text-box {
            background-color: rgba(255, 255, 255, 0.98);
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -4px 20px rgba(148, 163, 184, 0.4);
            border-top: 4px solid #cbd5e1; /* Slate-300 */
        }

        /* ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ */
        .img-container {
            width: 100%;
            height: 100%;
            background-color: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .img-cover { width: 100%; height: 100%; object-fit: cover; }
        .img-fit { width: 100%; height: 100%; object-fit: contain; }

        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* ìºë¦­í„° ëŒ€ì‚¬ ê°•ì¡° ìƒ‰ìƒ */
        .char-yul { color: #0ea5e9; font-weight: 700; } /* ìœ¨ì´ - í•˜ëŠ˜ìƒ‰ */
        .char-toto { color: #9333ea; font-weight: 700; } /* í† í†  - ë³´ë¼ìƒ‰ (Purple-600) */
        .char-guide { color: #f59e0b; font-weight: 700; } /* ë°±í•© - í˜¸ë°•ìƒ‰ */
        .char-ancient { color: #57534e; font-weight: 700; } /* ì—­ì‚¬ ì¸ë¬¼ - ê°ˆìƒ‰ */
        .char-extra { color: #64748b; font-weight: 700; } /* ì ì› ë“± - íšŒìƒ‰ */
    </style>
</head>
<body class="h-screen w-screen flex flex-col justify-center items-center bg-slate-200">

    <div id="app" class="w-full h-full max-w-md bg-white relative shadow-2xl overflow-hidden flex flex-col border-x border-slate-300">
    </div>

    <script>
        // ë°ì´í„° ì •ì˜
        const storyData = [
            {
                type: 'cover',
                image: 'images/coin0.jpg', 
                alt: 'í‘œì§€: ìœ¨ì´ì˜ ì—­ì‚¬ì—¬í–‰ - ì˜¤ë°±ì›ì˜ ì¡°ìƒì„ ì°¾ì•„ì„œ'
            },
            {
                type: 'intro',
                image: 'images/coin1.jpg',
                title: 'ğŸ« ë“±ì¥ì¸ë¬¼ ì†Œê°œ',
                content: `
                    <div class="space-y-3 text-sm">
                        <p><span class="char-yul">ì¡°ìœ¨ (8ì„¸)</span>: ì²­ê³¡ì´ˆ 1í•™ë…„ 5ë°˜. í˜¸ê¸°ì‹¬ ëŒ€ì¥! í¬ë‹ˆí…Œì¼ì„ ì‚¬ë‘í•˜ê³  ì •ì˜ë¡œìš´ ì–´ë¦°ì´ íƒí—˜ê°€.</p>
                        <p><span class="char-toto">í† í† </span>: ìœ¨ì´ê°€ ì˜ ë•Œë§ˆë‹¤ í•¨ê»˜ ìëŠ” ì• ì°© í† ë¼ ì¸í˜•. ì²™ì²™ë°•ì‚¬ ê°€ì´ë“œ.</p>
                        <p><span class="char-guide">ë°±í•©</span>: ìœ¨ì´ì˜ ë°˜ë ¤ ë„ë§ˆë±€. ê¼¬ë¦¬ê°€ ë°˜ì§ì´ë©´ ì‹œê°„ ì—¬í–‰ì˜ ë¬¸ì„ ì—°ë‹¤.</p>
                        <p><span class="char-ancient">ì†¡êµ­ë¦¬ ì´Œì¥ë‹˜</span>: ì²­ë™ê¸° ì‹œëŒ€ ë§ˆì„ ì´Œì¥. ì‚¬ê³¼ë¥¼ ì¢‹ì•„í•¨.</p>
                        <p><span class="char-ancient">ì™• ì„œë°© & ì™œ ìƒì¸</span>: ì² ê¸° ì‹œëŒ€ ëŠ‘ë„ í•­êµ¬ì˜ ê¸€ë¡œë²Œ ìƒì¸ë“¤.</p>
                        <p><span class="char-ancient">ê³ ë ¤ ëŒ€ì¥ì¥ì´</span>: ëšì‹¬ ìˆëŠ” ê³ ë ¤ ìµœê³ ì˜ ê¸°ìˆ ì.</p>
                    </div>
                `
            },
            {
                type: 'story',
                image: 'images/coin2.jpg',
                title: '1ì¥: CUì—ì„œì˜ ëŒ€ìœ„ê¸°!',
                sub: '(2025ë…„ í˜„ì¬, í¬ë ˆí”¼ìŠ¤ CU)',
                content: `
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ìœ¼ì•„, ë°°ê³ íŒŒ! ê°„ì‹ íƒ€ì„ì—” ì—­ì‹œ ê°€ë‚˜ì´ˆì½œë¦¿ì´ì§€! ì´ê±° í•˜ë‚˜ë©´ ì„¸ìƒ í–‰ë³µí•  ê²ƒ ê°™ì•„!</p>
                    <p class="mb-2"><span class="char-extra">ì ì›:</span> ì†ë‹˜, 1,700ì›ì…ë‹ˆë‹¤~</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> (ì£¼ë¨¸ë‹ˆì—” ì¡°ì•½ëŒ ë¿) í—‰! ì§€ê°‘ ë‘ê³  ì™”ë‹¤! ì €ê¸°... ëˆ ëŒ€ì‹  ì´ ì˜ˆìœ ëŒ ë“œë¦¬ë©´ ì•ˆ ë ê¹Œìš”?</p>
                    <p class="mb-2"><span class="char-extra">ì ì›:</span> ë¯¸ì•ˆí•˜ì§€ë§Œ ëŒë¡œëŠ” ì´ˆì½œë¦¿ì„ ì‚´ ìˆ˜ ì—†ë‹¨ë‹¤.</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> (í„¸ì©) ì‰ì‰! ì •ì˜ë¡­ì§€ ì•Šì•„! ì˜›ë‚ ì—” ë¬¼ê±´ë¼ë¦¬ ë°”ê¿¨ë‹¤ë©´ì„œìš”!</p>
                    <p class="mb-2"><span class="char-guide">ë°±í•©:</span> (ê¼¬ë¦¬ ë²ˆì©!) ìº¬ì•™~!</p>
                    <p><span class="char-toto">í† í† :</span> (ë²Œë–¡!) ìœ¨ì•„! ëˆ ì—†ë˜ ì‹œì ˆì´ ì–¼ë§ˆë‚˜ ë¶ˆí¸í–ˆëŠ”ì§€ ê°€ë³¼ê¹Œ? ì¶œë°œ!</p>
                `
            },
            {
                type: 'story',
                image: 'images/coin3.jpg',
                title: '2ì¥: ë¬´ê±°ì›Œ ëª» ì‚´ê² ë‹¤!',
                sub: '(ì²­ë™ê¸° ì‹œëŒ€ - ë¶€ì—¬ ì†¡êµ­ë¦¬)',
                content: `
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ì—¬ê¸´ ì²­ë™ê¸° ì‹œëŒ€ì•¼. ì‚¬ëŒë“¤ì´ ë¬¼ê±´ì„ ì„œë¡œ ë°”ê¾¸ëŠ” 'ë¬¼ë¬¼êµí™˜' ì‹œì¥ì´ì§€!</p>
                    <p class="mb-2"><span class="char-ancient">ì´Œì¥:</span> ì‹±ì‹±í•œ ì‚¬ê³¼ê°€ ì™”ì–´ìš”~</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ì•„ì €ì”¨! ì‚¬ê³¼ ì£¼ì„¸ìš”! ëŒ€ì‹  ì´ ëª¸ì§‘ë§Œ í•œ 'ë¯¼ë¬´ëŠ¬ í† ê¸°' 3ê°œ ë“œë¦´ê²Œìš”! ë™ì°¨... ë„ˆë¬´ ë¬´ê±°ì›Œ!</p>
                    <p class="mb-2"><span class="char-ancient">ì´Œì¥:</span> ì–´í—ˆ, ìš°ë¦¬ ì§‘ì—” í† ê¸°ê°€ 100ê°œë‚˜ ìˆì–´! í† ê¸° ë§ê³  ìŒ€ì„ ë‹¤ì˜¤!</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ë„¤?! (ì™€ì¥ì°½!) ì•™! ë‚´ ê·¸ë¦‡! ì‚¬ê³¼ í•˜ë‚˜ ë¨¹ê¸° ë„ˆë¬´ í˜ë“¤ì–ì•„!</p>
                    <p><span class="char-ancient">ì´Œì¥:</span> (ëŒí™”ì‚´ì´‰ì„ êº¼ë‚´ë©°) ëŒ€ì‹  ì´ 'ëŒí™”ì‚´ì´‰'ì„ ì£¼ë©´ ì‚¬ê³¼ë¥¼ ì£¼ë§ˆ. ê°€ë³ê³  ì©ì§€ë„ ì•Šì•„ì„œ ëˆì²˜ëŸ¼ ì“´ë‹¨ë‹¤.</p>
                `
            },
            {
                type: 'story',
                image: 'images/coin4.jpg',
                title: '3ì¥: ì¹¼ì´ë‘ ë„ë„›ìœ¼ë¡œ ê³„ì‚°ì„?',
                sub: '(ì² ê¸° ì‹œëŒ€ - ì‚¬ì²œ ëŠ‘ë„)',
                content: `
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ì—¬ê¸´ 'ëŠ‘ë„'ë¼ëŠ” êµ­ì œ í•­êµ¬ì•¼!</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ë°°ê³ íŒŒ. ì•„ê¹Œ ê·¸ ëŒí™”ì‚´ì´‰ìœ¼ë¡œ ë¹µ ì‚¬ ë¨¹ì!</p>
                    <p class="mb-2"><span class="char-ancient">ì™• ì„œë°©:</span> ë…¸ë…¸! ëŒë©©ì´ëŠ” ì•ˆ ë°›ì•„ìš”! ëŒ€ì‹  ì´ê±¸ ë‚´ì‹œì˜¤. (ì¹¼ ëª¨ì–‘ 'ëª…ë„ì „'ì„ êº¼ë‚¸ë‹¤)</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> íˆìµ! ìš”ë¦¬í•  ë•Œ ì“°ëŠ” ì¹¼ì„ ì™œ ì¤˜ìš”? ë¬´ì„œì›Œìš”!</p>
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ì´ê±´ ì¹¼ ëª¨ì–‘ ëˆì¸ 'ëª…ë„ì „'ì´ì•¼. ê·¸ë¦¬ê³  ì €ê±´ ë„ë„› ëª¨ì–‘ 'ì˜¤ìˆ˜ì „'ì´ì§€. êµ¬ë©ì— ëˆì„ ê¿°ì–´ì„œ ë“¤ê³  ë‹¤ë…€.</p>
                    <p><span class="char-yul">ìœ¨:</span> ì˜¤~ ì§¤ë‘ì§¤ë‘ ì†Œë¦¬ë„ ì¢‹ê³  ê°€ë²¼ì›Œì„œ ì§±ì´ë‹¤! ì—­ì‹œ ì‡ ë¡œ ë§Œë“  ëˆì´ ìµœê³ ë„¤!</p>
                `
            },
            {
                type: 'story',
                image: 'images/coin5.jpg',
                title: '4ì¥: ìš°ë¦¬ë‚˜ë¼ ëˆì˜ íƒ„ìƒ!',
                sub: '(ê³ ë ¤ ì‹œëŒ€ - ê°œê²½ ëŒ€ì¥ê°„)',
                content: `
                    <p class="mb-2"><span class="char-ancient">ëŒ€ì¥ì¥ì´:</span> ì, ë“œë””ì–´ ì™„ì„±ì´ë‹¤! ê³ ë ¤ì˜ ìì¡´ì‹¬! (ê°“ ë§Œë“  'ê±´ì›ì¤‘ë³´'ë¥¼ ê±´ë„¨ë‹¤)</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ì•— ëœ¨ê±°! ì–´? í•œìê°€ ì¨ìˆë„¤? ì—ì´, ì•„ê¹Œ ì¤‘êµ­ ì•„ì €ì”¨ ëˆì´ë‘ ë¹„ìŠ·í•œë°?</p>
                    <p class="mb-2"><span class="char-ancient">ëŒ€ì¥ì¥ì´:</span> (ë²„ëŸ­) ë¬´ìŠ¨ ì†Œë¦¬! ë’¤ë¥¼ ë’¤ì§‘ì–´ ë³´ê±°ë¼!</p>
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ë’·ë©´ì— 'ë™êµ­(æ±åœ‹)'ì´ë¼ê³  ì¨ìˆì§€? 'ë™ìª½ì˜ ë‚˜ë¼', ë°”ë¡œ ìš°ë¦¬ ê³ ë ¤ë¥¼ ëœ»í•´! ìµœì´ˆë¡œ ìš°ë¦¬ ì´ë¦„í‘œë¥¼ ë¶™ì¸ í™”íì•¼!</p>
                    <p><span class="char-yul">ìœ¨:</span> ìš°ì™€! ë’·ë©´ì— ìš°ë¦¬ ì´ë¦„í‘œë¥¼ ë¶™ì¸ ê±°êµ¬ë‚˜! ë©‹ì§€ë‹¤!</p>
                `
            },
            {
                type: 'story',
                image: 'images/coin6.jpg',
                title: '5ì¥: ë…¹ìŠ¨ ëˆê³¼ í˜¸ë¦¬ë³‘ì˜ ë¹„ë°€',
                sub: '(ê³ ë ¤ ì‹œëŒ€ - ê°œê²½ ì‹œì¥)',
                content: `
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> í• ë¨¸ë‹ˆ! ì´ ë©‹ì§„ 'ë™êµ­' ëˆìœ¼ë¡œ ë–¡ ì£¼ì„¸ìš”!</p>
                    <p class="mb-2"><span class="char-ancient">í• ë¨¸ë‹ˆ:</span> ì•„ì´ê³ , ì´ ì‡ ëˆì€ ì‹«ë‹¤! ë¹„ ë§ìœ¼ë©´ ë…¹ì´ ìŠ¬ì–´ì„œ ëª» ì¨! ê·¸ëƒ¥ ìŒ€ì´ë‚˜ ì˜·ê°ìœ¼ë¡œ ë‹¤ì˜¤.</p>
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> í... ì¸ê¸°ê°€ ì—†ë„¤...</p>
                    <p class="mb-2"><span class="char-toto">í† í† :</span> ì €ê¸° ë¶€ì ì•„ì €ì”¨ê°€ ë“  ì€ë©ì–´ë¦¬ ë³´ì—¬? ì €ê±´ 'ì€ë³‘(í™œêµ¬)'ì´ì•¼. ìš°ë¦¬ë‚˜ë¼ ì§€ë„ ëª¨ì–‘ì´ì§€. ì €ê±° í•˜ë‚˜ë©´ ì´ˆì½œë¦¿ ê³µì¥ë„ ì‚´ ìˆ˜ ìˆì–´!</p>
                    <p><span class="char-yul">ìœ¨:</span> ëŒ€ë°•! í•˜ì§€ë§Œ ë„ˆë¬´ ë¹„ì‹¸ì„œ ë‚˜ ê°™ì€ ì–´ë¦°ì´ëŠ” êµ¬ê²½ë„ ëª»í•˜ê² ë„¤...</p>
                `
            },
            {
                type: 'story',
                image: 'images/coin7.jpg',
                title: '6ì¥: ì—­ì‹œ ìš°ë¦¬ ëˆì´ ìµœê³ ì•¼!',
                sub: '(ë‹¤ì‹œ 2025ë…„ í¬ë ˆí”¼ìŠ¤ CU ì•)',
                content: `
                    <p class="mb-2"><span class="char-yul">ìœ¨:</span> ìœ¼ì•„~ ë„ì°©í–ˆë‹¤! (ì£¼ë¨¸ë‹ˆë¥¼ ë’¤ì ) ì–´?! 500ì›ì§œë¦¬ ë„¤ ê°œê°€ ìˆì–´! ì•„ê¹Œ í• ë¨¸ë‹ˆê°€ ë–¡ ëŒ€ì‹  ì£¼ì‹  ê±´ê°€?</p>
                    <p class="mb-2"><span class="char-toto">í† í† :</span> (ì”¨ìµ)</p>
                     <p class="mb-2"><span class="char-yul">ìœ¨:</span> ì•¼í˜¸! ì‚¬ì¥ë‹˜ ì—¬ê¸° 2,000ì›ì´ìš”! ë¬´ê±°ìš´ í† ê¸° ì•ˆ ë“¤ê³  ë‹¤ë…€ë„ ë˜ê³ , ë…¹ìŠ¬ì§€ë„ ì•ŠëŠ” ìš°ë¦¬ ëˆ ìµœê³ !</p>
                    <p class="mb-2 text-sm text-gray-500">(ì´ˆì½œë¦¿ì„ í•œì… ë² ì–´ ë¬¼ë©°)</p>
                    <p><span class="char-yul">ìœ¨:</span> ìŒ~ ë‹¬ì½¤í•´! ê³µë¶€í•˜ê³  ë¨¹ìœ¼ë‹ˆê¹Œ ë” ë§›ìˆëŠ” ê²ƒ ê°™ì•„!</p>
                `
            },
            {
                type: 'quiz_intro',
                image: 'images/coin8.jpg',
                title: 'ìœ¨ì´ì˜ ì•Œì­ë‹¬ì­ O, X í€´ì¦ˆ',
                content: `
                    <p class="mb-4 text-center text-lg">ëˆì˜ ì—­ì‚¬ ì—¬í–‰ ì¦ê±°ì› ë‚˜ìš”?</p>
                    <p class="text-center text-gray-600">ìœ¨ì´ì™€ í•¨ê»˜ ë°°ìš´ ë‚´ìš©ì„<br>í€´ì¦ˆë¡œ í’€ì–´ë´ìš”! (3ë¬¸ì œ)</p>
                `
            },
            {
                type: 'ending',
                image: 'images/coin9.jpg',
                alt: 'ë'
            }
        ];

        const quizData = [
            {
                question: "ì²­ë™ê¸° ì‹œëŒ€ì—ëŠ” ëˆ ëŒ€ì‹  'ë¬´ëŠ¬ ì—†ëŠ” í† ê¸°'ë‚˜ 'ëŒí™”ì‚´ì´‰'ìœ¼ë¡œ ë¬¼ê±´ì„ ìƒ€ë‹¤?",
                answer: true,
                explanation: "ëˆì´ ì—†ë˜ ì‹œì ˆì—ëŠ” ê³¡ì‹, í† ê¸°, ëŒí™”ì‚´ì´‰ì²˜ëŸ¼ ëª¨ë‘ê°€ í•„ìš”í•œ ë¬¼ê±´ì´ ëˆ ì—­í• ì„ í–ˆì–´. í•˜ì§€ë§Œ í† ê¸°ëŠ” ë„ˆë¬´ ë¬´ê±°ì› ì§€!"
            },
            {
                question: "'ëª…ë„ì „'ì€ ìš”ë¦¬í•  ë•Œ ì“°ëŠ” ì¹¼ì´ì—ˆë‹¤?",
                answer: false,
                explanation: "ì¹¼ì²˜ëŸ¼ ìƒê²¨ì„œ í—·ê°ˆë¦´ ìˆ˜ ìˆì§€ë§Œ, ì¤‘êµ­ê³¼ ê³ ì¡°ì„  ì‚¬ëŒë“¤ì´ ì¼ë˜ <span class='text-blue-500 font-bold'>'ëˆ'</span>ì´ì•¼. í—ˆë¦¬ì— ì°¨ê³  ë‹¤ë…”ëŒ€."
            },
            {
                question: "ê³ ë ¤ ì‹œëŒ€ì— ë§Œë“  'ê±´ì›ì¤‘ë³´' ë’·ë©´ì—ëŠ” 'ëŒ€í•œë¯¼êµ­'ì´ë¼ê³  ì í˜€ ìˆë‹¤?",
                answer: false,
                explanation: "ë’·ë©´ì—ëŠ” <span class='text-rose-500 font-bold'>'ë™êµ­(æ±åœ‹)'</span>ì´ë¼ê³  ì í˜€ ìˆì—ˆì–´. 'ë™ìª½ì˜ ë‚˜ë¼'ë¼ëŠ” ëœ»ì´ì§€!"
            }
        ];

        // ìƒíƒœ ê´€ë¦¬
        let currentState = {
            pageIndex: 0,
            quizIndex: 0,
            quizStatus: 'question',
            lastAnswer: null
        };

        const app = document.getElementById('app');

        function render() {
            app.innerHTML = ''; 
            
            if (currentState.pageIndex < storyData.length) {
                const page = storyData[currentState.pageIndex];
                
                if (page.type === 'cover') {
                    renderCover(page);
                } else if (page.type === 'ending') {
                    renderEnding(page);
                } else if (page.type === 'quiz_intro') {
                    renderStoryPage(page, true);
                } else {
                    renderStoryPage(page, false);
                }
            } 
            else if (currentState.pageIndex === storyData.length) {
                renderQuiz();
            }
        }

        // --- ì»´í¬ë„ŒíŠ¸ ---

        function renderCover(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = nextPage;
            div.innerHTML = `
                <div class="img-container">
                    <img src="${data.image}" class="img-cover" alt="${data.alt}" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full bg-slate-200 flex flex-col items-center justify-center text-slate-600 font-comic\\'><span class=\\'text-6xl mb-4\\'>ğŸª™ğŸ”</span><h1 class=\\'text-center text-2xl\\'>ìœ¨ì´ì˜ ì—­ì‚¬ì—¬í–‰<br>ì˜¤ë°±ì›ì˜ ì¡°ìƒì„<br>ì°¾ì•„ì„œ!</h1><p class=\\'text-sm mt-8 animate-pulse\\'>í™”ë©´ì„ í„°ì¹˜í•˜ì„¸ìš”</p></div>'">
                </div>
                <div class="absolute bottom-10 w-full text-center text-white font-comic animate-pulse text-xl drop-shadow-md bg-slate-900/40 py-2">
                    í™”ë©´ì„ íƒ­í•˜ì—¬ ì‹œê°„ì—¬í–‰ ë– ë‚˜ê¸°
                </div>
            `;
            app.appendChild(div);
        }

        function renderStoryPage(data, isQuizIntro) {
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-white fade-in";
            
            const imgHtml = `
                <div class="flex-1 img-container relative border-b-4 border-slate-300">
                    <img src="${data.image}" class="img-fit" alt="ì‚½í™”" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full bg-slate-50 flex items-center justify-center text-gray-400\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'">
                </div>
            `;

            const textHtml = `
                <div class="h-[33%] flex flex-col relative bg-slate-100">
                    <div class="flex-1 p-6 overflow-y-auto text-box -mt-6 z-10 text-lg leading-relaxed text-slate-800">
                        ${data.title ? `<h2 class="font-comic text-2xl text-slate-600 mb-1 flex items-center gap-2"><span class="text-sm">ğŸª™</span>${data.title}</h2>` : ''}
                        ${data.sub ? `<p class="text-sm text-gray-500 mb-4">${data.sub}</p>` : ''}
                        <div class="space-y-2">
                            ${data.content}
                        </div>
                    </div>
                    
                    <div class="h-20 bg-white flex justify-between items-center px-8 border-t border-slate-200 z-20 shadow-[0_-4px_10px_rgba(0,0,0,0.05)]">
                        <div onclick="prevPage()" class="btn-prev-coin flex flex-col items-center cursor-pointer text-slate-400 hover:text-slate-600 transition">
                            <span class="text-3xl">ğŸª™</span>
                        </div>
                        
                        ${isQuizIntro ? 
                            `<div onclick="startQuiz()" class="btn-quiz flex flex-col items-center cursor-pointer text-rose-500">
                                <div class="w-14 h-14 bg-rose-500 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-rose-200">?</div>
                                <span class="text-xs font-bold mt-1 text-rose-600">í€´ì¦ˆ ì‹œì‘!</span>
                            </div>` 
                            : 
                            `<div onclick="nextPage()" class="btn-next-coin flex flex-col items-center text-slate-500">
                                <span class="text-4xl">ğŸª™</span>
                                <span class="text-xs font-bold mt-1 text-orange-600">ë‹¤ìŒ</span>
                            </div>`
                        }
                    </div>
                </div>
            `;
            
            div.innerHTML = imgHtml + textHtml;
            app.appendChild(div);
        }

        function renderQuiz() {
            if (currentState.quizIndex >= quizData.length) {
                currentState.pageIndex = storyData.length - 1; 
                currentState.quizIndex = 0;
                render();
                return;
            }

            const currentQ = quizData[currentState.quizIndex];
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-slate-50 fade-in";

            let contentHtml = '';

            if (currentState.quizStatus === 'question') {
                contentHtml = `
                    <div class="flex-1 flex flex-col items-center justify-center p-6 text-center">
                        <span class="text-slate-500 font-bold text-xl mb-4 bg-slate-200 px-4 py-1 rounded-full">ë¬¸ì œ ${currentState.quizIndex + 1} / 3</span>
                        <div class="bg-white p-8 rounded-2xl shadow-xl w-full mb-8 border-2 border-slate-300">
                            <p class="text-2xl font-bold leading-normal break-keep text-slate-800">${currentQ.question}</p>
                        </div>
                        <div class="flex gap-6 w-full justify-center">
                            <button onclick="checkAnswer(true)" class="w-24 h-24 bg-blue-500 rounded-full text-white text-5xl font-black shadow-lg hover:bg-blue-600 active:scale-95 transition border-4 border-blue-300 ring-2 ring-offset-2 ring-blue-200">O</button>
                            <button onclick="checkAnswer(false)" class="w-24 h-24 bg-red-500 rounded-full text-white text-5xl font-black shadow-lg hover:bg-red-600 active:scale-95 transition border-4 border-red-300 ring-2 ring-offset-2 ring-red-200">X</button>
                        </div>
                    </div>
                    <div class="h-20 bg-white border-t border-slate-200 flex items-center px-4">
                        <button onclick="exitQuiz()" class="text-slate-400 font-bold text-sm">â—€ ëŒì•„ê°€ê¸°</button>
                    </div>
                `;
            } 
            else if (currentState.quizStatus === 'result') {
                const isCorrect = currentState.lastAnswer === currentQ.answer;
                const emoji = isCorrect ? 'ğŸ‰ğŸª™ğŸ‰' : 'ğŸŒ©ï¸ğŸ˜«ğŸŒ©ï¸'; 
                const bgColor = isCorrect ? 'bg-sky-500' : 'bg-rose-500';
                const message = isCorrect ? 'ë”©ë™ëŒ•! ì •ë‹µ!' : 'ë•¡! í‹€ë ¸ì–´ìš”!';

                contentHtml = `
                    <div class="w-full h-full ${bgColor} flex flex-col items-center justify-center text-white cursor-pointer" onclick="showExplanation()">
                        <div class="text-8xl mb-6 animate-bounce">${emoji}</div>
                        <h2 class="text-4xl font-comic mb-4 drop-shadow-md">${message}</h2>
                        <p class="animate-pulse text-lg opacity-90">í™”ë©´ì„ íƒ­í•˜ì—¬ í•´ì„¤ ë³´ê¸°</p>
                    </div>
                `;
            }
            else if (currentState.quizStatus === 'explanation') {
                const isLastQuestion = currentState.quizIndex === quizData.length - 1;
                const nextButtonText = isLastQuestion ? "ì—¬í–‰ ë§ˆì¹˜ê¸°" : "ë‹¤ìŒ ë¬¸ì œ";

                contentHtml = `
                    <div class="flex-1 flex flex-col p-6 bg-white cursor-pointer" onclick="nextQuizStep()">
                        <div class="flex-1 flex flex-col justify-center items-center">
                            <h3 class="text-2xl font-comic text-slate-600 mb-6 flex items-center gap-2"><span>ğŸ‘§ğŸ»</span> ìœ¨ì´ì˜ í•´ì„¤</h3>
                            <div class="bg-slate-50 p-6 rounded-xl border-2 border-slate-300 shadow-md w-full relative">
                                <div class="absolute -top-4 -left-2 text-4xl">ğŸ’¡</div>
                                <p class="text-xl font-medium text-slate-800 leading-relaxed mt-2 word-keep">
                                    "${currentQ.explanation}"
                                </p>
                            </div>
                        </div>
                        <div class="h-24 w-full flex items-center justify-center">
                            <div class="btn-next-coin flex flex-col items-center">
                                <span class="text-4xl text-slate-600">ğŸª™</span>
                                <span class="text-sm font-bold text-slate-500 mt-1">${nextButtonText}</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            div.innerHTML = contentHtml;
            app.appendChild(div);
        }

        function renderEnding(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = restart;
            div.innerHTML = `
                <div class="img-container">
                    <img src="${data.image}" class="img-cover" alt="ë" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full bg-slate-200 flex flex-col items-center justify-center text-slate-500\\'><span class=\\'text-6xl mb-4\\'>ğŸ«</span><p>ì—­ì‚¬ ì—¬í–‰ ë!</p></div>'">
                </div>
                <div class="absolute bottom-10 w-full text-center text-white font-comic animate-pulse text-xl bg-black/50 py-2">
                    ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸° â†º
                </div>
            `;
            app.appendChild(div);
        }

        // --- ë¡œì§ ---

        function nextPage() {
            if (currentState.pageIndex < storyData.length) {
                currentState.pageIndex++;
                render();
            }
        }

        function prevPage() {
            if (currentState.pageIndex > 0) {
                currentState.pageIndex--;
                render();
            }
        }

        function startQuiz() {
            currentState.pageIndex = storyData.length; 
            currentState.quizIndex = 0;
            currentState.quizStatus = 'question';
            render();
        }

        function exitQuiz() {
            currentState.pageIndex--; 
            render();
        }

        function checkAnswer(userAnswer) {
            currentState.lastAnswer = userAnswer;
            currentState.quizStatus = 'result';
            render();
        }

        function showExplanation() {
            currentState.quizStatus = 'explanation';
            render();
        }

        function nextQuizStep() {
            currentState.quizIndex++;
            currentState.quizStatus = 'question';
            render();
        }

        function restart() {
            currentState.pageIndex = 0;
            currentState.quizIndex = 0;
            render();
        }

        render();

    </script>
</body>
</html>
