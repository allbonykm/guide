<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìœ¨ì´ì˜ ì—¬í–‰ì‹œë¦¬ì¦ˆ: ìœ¨ì´ì˜ ê³¼í•™ì—¬í–‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #fff7ed; overflow: hidden; touch-action: manipulation; }
        .font-comic { font-family: 'Jua', sans-serif; }
        @keyframes float { 0% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-5px) rotate(5deg); } 100% { transform: translateY(0px) rotate(0deg); } }
        .btn-theme { animation: float 2.5s infinite ease-in-out; cursor: pointer; transition: all 0.2s; }
        .btn-theme:active { transform: scale(0.9); }
        .text-box { background-color: rgba(255, 255, 255, 0.98); border-radius: 20px 20px 0 0; box-shadow: 0 -4px 15px rgba(0,0,0,0.1); }
        .img-container { width: 100%; height: 100%; background-color: #fef3c7; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .img-cover { width: 100%; height: 100%; object-fit: cover; }
        .img-fit { width: 100%; height: 100%; object-fit: contain; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        /* ëŒ€ì‚¬ ê°„ê²© ì¡°ì • */
        .dialogue-box p { margin-bottom: 0.5rem; word-break: keep-all; }
        .scene-divider { text-align: center; color: #cbd5e1; margin: 1.5rem 0; font-size: 0.9rem; letter-spacing: 2px; }
        /* ê°•ì¡° í…ìŠ¤íŠ¸ */
        .highlight { color: #d97706; font-weight: bold; background: #fef3c7; padding: 0 4px; border-radius: 4px; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col justify-center items-center">
    <div id="app" class="w-full h-full max-w-md bg-white relative shadow-2xl overflow-hidden flex flex-col border-x border-orange-100"></div>
    <script>
        // *** AI ë°ì´í„° ìƒì„± ì˜ì—­ ***
        // ì´ë¯¸ì§€ í‚¤ì›Œë“œ: images/moss
        const storyData = [
            // í‘œì§€
            {
                type: 'cover',
                image: 'images/moss0.jpg',
                title: 'ìœ¨ì´ì˜ ê³¼í•™ì—¬í–‰',
                sub: 'ì•„ë¹ ! ìµœì´ˆì˜ ì‹ë¬¼ì€ ì–´ë”¨ì–´?'
            },
            // ë“±ì¥ì¸ë¬¼ ì†Œê°œ
            {
                type: 'intro',
                image: 'images/moss1.jpg',
                title: 'ë“±ì¥ì¸ë¬¼ ì†Œê°œ',
                sub: 'ì´ë²ˆ ì—¬í–‰ì„ í•¨ê»˜í•  ì¹œêµ¬ë“¤ì´ì—ìš”!',
                content: `
                    <div class="space-y-4">
                        <p><strong class="text-sky-500 text-lg">ì¡°ìœ¨ (8ì„¸)</strong><br>ì²­ê³¡ì´ˆ 1í•™ë…„ 5ë°˜. ìì—°ì„ ì‚¬ë‘í•˜ê³  ë³´í˜¸í•˜ëŠ” ë©‹ì§„ ì†Œë…€. ê¶ê¸ˆí•œ ê±´ ëª» ì°¸ëŠ” í˜¸ê¸°ì‹¬ ëŒ€ì¥.</p>
                        <p><strong class="text-pink-500 text-lg">í† í† </strong><br>ìœ¨ì´ê°€ ì•ˆê³  ë‹¤ë‹ˆëŠ” ì• ì°© í† ë¼ ì¸í˜•. ìœ¨ì´ì˜ ê¶ê¸ˆì¦ì„ í•´ê²°í•´ ì£¼ëŠ” ë˜‘ë˜‘í•œ í•´ê²°ì‚¬.</p>
                        <p><strong class="text-green-600 text-lg">ë°±í•©</strong><br>ìœ¨ì´ ì–´ê¹¨ ìœ„ì— ì˜ ë¶™ì–´ ìˆëŠ” ë°˜ë ¤ ë„ë§ˆë±€. ê¼¬ë¦¬ê°€ ë°ì•„ì§€ë©´ ì‹œê³µê°„ì„ ì´ë™í•˜ëŠ” ì‹ ë¹„í•œ ë„ë§ˆë±€.</p>
                    </div>
                `
            },
            // ì œ1ì¥
            {
                type: 'story',
                image: 'images/moss2.jpg',
                title: 'ì œ1ì¥: ì‹ë¬¼ì´ë€ ë¬´ì—‡ì¼ê¹Œ?',
                sub: 'ìˆ² ì²´í—˜ê³¼ í† í† ì˜ ì–´ë ¤ìš´ ì„¤ëª…',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-gray-600">ì„ ìƒë‹˜</strong>: ì, ì—¬ëŸ¬ë¶„! ìˆ²ì—ëŠ” ë§ì€ ì‹ë¬¼ì´ ìˆì£ ? ê·¸ëŸ¼ 'ì‹ë¬¼'ì´ ë„ëŒ€ì²´ ë­˜ê¹Œìš”?</p>
                        <p><strong class="text-gray-700">íœ˜ì„œ</strong>: (ì†ì„ ë²ˆì© ë“¤ë©°) ì €ìš”! ê´‘í•©ì„±ì„ í•˜ê³  ì›€ì§ì´ì§€ ì•ŠëŠ” ê±°ìš”!</p>
                        <p><strong class="text-gray-600">ì„ ìƒë‹˜</strong>: ì˜¤~ ì•„ì£¼ ë˜‘ë˜‘í•œ ëŒ€ë‹µì´ë„¤ìš”!</p>
                        
                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-pink-500">í† í† </strong>: (ì†ë‹¥ì†ë‹¥) ìœ¨ì•„, ì‚¬ì‹¤ ì‹ë¬¼ì˜ ì •ì˜ëŠ” ë” ë³µì¡í•´. ì—½ë¡ì²´ë¥¼ ê°€ì§„ ì¡°ìƒì—ì„œ ì§„í™”í•œ í•˜ë‚˜ì˜ í˜ˆí†µì„ ì‹ë¬¼ë¡œ ì •ì˜í•˜ë©´, ìœ¡ìƒì‹ë¬¼ì— ë…¹ì¡°ë¥˜, í™ì¡°ë¥˜, íšŒì²­ì¡°ë¥˜ê¹Œì§€ ë‹¤ í¬í•¨ë¼.</p>
                        <p><strong class="text-pink-500">í† í† </strong>: ì¡°ê¸ˆ ì¢ê²ŒëŠ” 'ë…¹ìƒ‰ì‹ë¬¼'ë§Œ ì³ì„œ ìœ¡ìƒì‹ë¬¼ê³¼ ë…¹ì¡°ë¥˜(íŒŒë˜, ì²­ê°)ë¥¼ ë§í•˜ê¸°ë„ í•˜ê³ , ë” ì¢ê²ŒëŠ” ë•…ì— ì‚¬ëŠ” 'ìœ ë°°ì‹ë¬¼'ë§Œ ë§í•˜ê¸°ë„ í•˜ëŠ”ë°...</p>
                        <p><strong class="text-sky-500">ìœ¨</strong>: (ì‹ì€ë•€) ìœ¼ì•„ì•„... ë¬´ìŠ¨ ë§ì´ì•¼? ë…¹ì¡°ë¥˜? íšŒì²­ì¡°ë¥˜?</p>

                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-sky-500">ìœ¨</strong>: ë‚œ ê·¸ëƒ¥ ë‚˜ë¬´, ê½ƒ, í’€ë§Œ ì‹ë¬¼ ê°™ì€ë°... ì–´ë ¤ìš´ ê±° ë§ê³ , ë•…ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ì‹ë¬¼ë§Œ ì•Œê³  ì‹¶ì–´!</p>
                        <p><strong class="text-pink-500">í† í† </strong>: (ë¨¸ì“±í•˜ê²Œ ë•€ ì‚ì§ˆ) í•˜í•˜, ê·¸ë˜? ê·¸ëŸ¼ ë‹¤ë¥¸ ê±´ ë‹¤ìŒì— í•˜ì!</p>
                        <p><strong class="text-pink-500">í† í† </strong>: ê·¸ëŸ¼ ìµœì´ˆì˜ ìœ¡ìƒ ì‹ë¬¼ì´ ëˆ„êµ°ì§€ ì§ì ‘ ë³´ëŸ¬ ê°ˆê¹Œ? ë°±í•©ì•„, ì¤€ë¹„í•´!</p>
                        <p><strong class="text-green-600">ë°±í•©</strong>: (ì”¨ìµ ì›ƒìœ¼ë©°) (ê¼¬ë¦¬ê°€ ë²ˆì©!)</p>
                    </div>
                `
            },
            // ì œ2ì¥
            {
                type: 'story',
                image: 'images/moss3.jpg',
                title: 'ì œ2ì¥: ì‚­ë§‰í•œ ë•…, ì´ˆë¡ìƒ‰ ë°”ë‹¤',
                sub: '4ì–µ 5ì²œë§Œ ë…„ ì „ ì§€êµ¬ë¡œ!',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-sky-500">ìœ¨</strong>: ìœ¼ì•…! ì—¬ê¸°ê°€ ì–´ë””ì•¼? ë‚˜ë¬´ë„ ì—†ê³  ê½ƒë„ ì—†ì–´! ê·¸ëƒ¥ ëŒë©ì´ ì„¸ìƒì´ì–ì•„?</p>
                        <p><strong class="text-pink-500">í† í† </strong>: ì—¬ê¸´ ì•„ì£¼ ë¨¼ ì˜›ë‚ ì´ì•¼. ì €ê¸° ë°”ë‹¤ë¥¼ ë´. ì˜¨í†µ ì´ˆë¡ìƒ‰ì´ì§€? ë°”ë‹·ì†ì—” ì‹ë¬¼ì˜ ì¡°ìƒì¸ 'ë…¹ì¡°ë¥˜'ë“¤ì´ ê°€ë“í•´.</p>
                        
                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-green-700">ë…¹ì¡°ë¥˜</strong>: ì˜ì°¨, ì˜ì°¨! ë‚˜ë„ ë•… êµ¬ê²½ í• ë˜!</p>
                        <p><strong class="text-green-700">ë…¹ì¡°ë¥˜</strong>: ìœ¼ì•…! ë„ˆë¬´ ê±´ì¡°í•´! ëª©ë§ë¼ ì£½ê² ì–´! (ë°”ì‚¬ì‚­)</p>
                        <p><strong class="text-sky-500">ìœ¨</strong>: ì €ëŸ°! ë•… ìœ„ëŠ” ë„ˆë¬´ ê±´ì¡°í•´ì„œ ë¬¼ì† ì¹œêµ¬ë“¤ì´ ì‚´ ìˆ˜ê°€ ì—†ë‚˜ ë´.</p>
                    </div>
                `
            },
            // ì œ3ì¥
            {
                type: 'story',
                image: 'images/moss4.jpg',
                title: 'ì œ3ì¥: ìµœì´ˆì˜ ìœ¡ìƒ ì‹ë¬¼, ì´ë¼ì˜ ë“±ì¥!',
                sub: 'ë¹„ì˜· ì…ê³  ë§ˆìŠ¤í¬ ì“´ ìŠˆí¼ íˆì–´ë¡œ?',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-pink-500">í† í† </strong>: ì§œì”! ê·¸ë•Œ ë“±ì¥í•œ ì˜ì›…ì´ ë°”ë¡œ <span class="highlight">'ì´ë¼(ì„ íƒœì‹ë¬¼)'</span>ì•¼!</p>
                        <p><strong class="text-pink-500">í† í† </strong>: ëª¸ì´ ë§ˆë¥´ì§€ ì•Šê²Œ <span class="highlight">'íˆ¬ëª… ë¹„ì˜·(íí‹°í´)'</span>ì„ ì…ê³ , ìˆ¨ì„ ì‰´ ìˆ˜ ìˆëŠ” <span class="highlight">'ìˆ¨êµ¬ë©(ê¸°ê³µ)'</span>ì„ ëš«ì—ˆì§€.</p>
                        <p><strong class="text-sky-500">ìœ¨</strong>: ìš°ì™€! ì‘ì§€ë§Œ ì¤€ë¹„ì„±ì´ ì² ì €í•˜ë„¤! ë¹„ì˜·ì„ ì…ìœ¼ë©´ ë¬¼ì€ ì•ˆ ë§ˆë¥´ì§€ë§Œ, ìˆ¨ì‰¬ê¸°ê°€ ë‹µë‹µí•´ì„œ êµ¬ë©ì„ ëš«ì—ˆêµ¬ë‚˜!</p>
                        
                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-sky-500">ìœ¨</strong>: ê·¼ë° ì–˜ëŠ” ì™œ ì´ë ‡ê²Œ í‚¤ê°€ ì‘ì•„? ë‚˜ë¬´ì²˜ëŸ¼ ì‘¥ì‘¥ ì•ˆ ì»¤?</p>
                        <p><strong class="text-pink-500">í† í† </strong>: ì•„ì§ ë¬¼ì„ ë¹¨ì•„ì˜¬ë¦¬ëŠ” ë¹¨ëŒ€(ë¬¼ê´€)ê°€ ì—†ì–´ì„œ ê·¸ë˜. ëŒ€ì‹  ë•…ì— ë‚©ì‘ ë¶™ì–´ì„œ ë¬¼ê¸°ë¥¼ ì˜¨ëª¸ìœ¼ë¡œ í¡ìˆ˜í•˜ëŠ” ê±°ì•¼.</p>
                    </div>
                `
            },
            // ì œ4ì¥
            {
                type: 'story',
                image: 'images/moss5.jpg',
                title: 'ì œ4ì¥: ìº¥ê±°ë£¨ ì—„ë§ˆë¥¼ ë‹®ì•˜ì–´ (ìœ ë°°ì‹ë¬¼)',
                sub: 'ì•„ê¸°ë¥¼ ì§€ì¼œë¼!',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-pink-500">í† í† </strong>: ìœ¨ì•„, ìœ¡ìƒ ì‹ë¬¼ì˜ ê°€ì¥ í° ë¹„ë°€ì„ ì•Œë ¤ì¤„ê²Œ. ë°”ë¡œ <span class="highlight">'ìº¥ê±°ë£¨ ì‘ì „'</span>ì´ì•¼!</p>
                        <p><strong class="text-sky-500">ìœ¨</strong>: ìº¥ê±°ë£¨? ì‹ë¬¼ì´?</p>
                        <p><strong class="text-pink-500">í† í† </strong>: ë¬¼ì† ì‹ë¬¼ì€ ì•Œì„ ë‚³ê³  ê·¸ëƒ¥ ê°€ë²„ë¦¬ì§€ë§Œ, ë•… ìœ„ ì‹ë¬¼ì€ ì•„ê¸°(ë°°)ê°€ íŠ¼íŠ¼í•´ì§ˆ ë•Œê¹Œì§€ ì—„ë§ˆ ëª¸ì†ì—ì„œ í’ˆì–´ì„œ í‚¤ì›Œ. ì´ê±¸ ì–´ë ¤ìš´ ë§ë¡œ <span class="highlight">'ìœ ë°°ì‹ë¬¼'</span>ì´ë¼ê³  í•´.</p>

                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-pink-500">í† í† </strong>: ì´ë¼ í• ë¨¸ë‹ˆ ë•ë¶„ì— ë‚˜ì¤‘ì— ê³ ì‚¬ë¦¬ ì‚¼ì´Œë„ ë‚˜ì˜¤ê³ , ê½ƒ ì–¸ë‹ˆë„ ë‚˜ì˜¬ ìˆ˜ ìˆì—ˆë˜ ê±°ì•¼.</p>
                        <p><strong class="text-sky-500">ìœ¨</strong>: ì•„í•˜! ì´ë¼ê°€ ë•… ìœ„ ì‹ë¬¼ë“¤ì˜ ìœ„ëŒ€í•œ ì™•í• ë¨¸ë‹ˆì˜€êµ¬ë‚˜!</p>
                    </div>
                `
            },
            // ì œ5ì¥
            {
                type: 'story',
                image: 'images/moss6.jpg',
                title: 'ì œ5ì¥: ì‘ì§€ë§Œ ìœ„ëŒ€í•œ ì‹œì‘',
                sub: 'í˜„ì‹¤ë¡œ ëŒì•„ì˜¨ ìˆ²ê³¼ ìœ¨ì´ì˜ ê¹¨ë‹¬ìŒ',
                content: `
                    <div class="dialogue-box">
                        <p><strong class="text-gray-600">ì„ ìƒë‹˜</strong>: ì–´? ìœ¨ì´ê°€ ë­˜ ê·¸ë ‡ê²Œ ì—´ì‹¬íˆ ë³´ê³  ìˆë‹ˆ?</p>
                        <p><strong class="text-sky-500">ìœ¨</strong>: ì„ ìƒë‹˜! ì—¬ê¸° ì‹ë¬¼ë“¤ì˜ ì™•í• ë¨¸ë‹ˆê°€ ì‚´ê³  ìˆì–´ìš”!</p>
                        <p><strong class="text-gray-700">ì¹œêµ¬ë“¤</strong>: (ì›…ì„±ì›…ì„±) ì™•í• ë¨¸ë‹ˆ? ì–´ë””?</p>
                        
                        <div class="scene-divider">* * *</div>

                        <p><strong class="text-sky-500">ìœ¨</strong>: (ì†ë§ˆìŒ) ì‘ë‹¤ê³  ë¬´ì‹œí•´ì„œ ë¯¸ì•ˆí•´. ë„¤ê°€ ìš©ê°í•˜ê²Œ ë•…ìœ¼ë¡œ ì˜¬ë¼ì™€ì¤˜ì„œ ìš°ë¦¬ê°€ ì˜ˆìœ ê½ƒë„ ë³´ê³  ë‚˜ë¬´ ê·¸ëŠ˜ì—ì„œë„ ì‰´ ìˆ˜ ìˆëŠ” ê±°ì•¼. ê³ ë§ˆì›Œ, ì´ë¼ì•¼!</p>
                        <p><strong class="text-sky-500">ìœ¨</strong>: (ì†Œë¦¬ ë‚´ì–´) ì‹ë¬¼ì€... ì•„ê¸°ë¥¼ ì†Œì¤‘í•˜ê²Œ ì§€í‚¤ë©° ë•…ì— ì ì‘í•œ ìš©ê°í•œ ì¹œêµ¬ë“¤ì´ì—ìš”!</p>
                    </div>
                `
            },
            // í€´ì¦ˆ ì¸íŠ¸ë¡œ
            {
                type: 'quiz_intro',
                image: 'images/moss7.jpg',
                title: 'ìœ¨ì´ì˜ í€´ì¦ˆ íƒ€ì„!',
                sub: 'ë°°ìš´ ë‚´ìš©ì„ í€´ì¦ˆë¡œ í™•ì¸í•´ë³¼ê¹Œìš”?',
                content: '<p class="text-center text-lg mt-4">ìœ¨ì´ì™€ í† í† ê°€ ì•Œë ¤ì¤€ ìµœì´ˆì˜ ì‹ë¬¼ ì´ì•¼ê¸°!<br>ì˜ ê¸°ì–µí•˜ê³  ìˆë‚˜ìš”?<br><br><strong>OX í€´ì¦ˆ 3ë¬¸ì œ</strong>ê°€ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”!<br>ì¤€ë¹„í•˜ì‹œê³ ~ ì˜ì„¸ìš”! ğŸŒ¿âœ¨</p>'
            },
            // ì—”ë”©
            {
                type: 'ending',
                image: 'images/moss8.jpg',
                title: 'ë',
                sub: ''
            }
        ];

        const quizData = [
            {
                question: "ë¯¸ì—­ì´ë‚˜ íŒŒë˜ ê°™ì€ 'ë…¹ì¡°ë¥˜'ëŠ” ì²˜ìŒë¶€í„° ë•… ìœ„ì—ì„œ ì‚´ì•˜ë‹¤?",
                answer: false,
                explanation: "ë…¹ì¡°ë¥˜ëŠ” ì‹ë¬¼ì˜ ì¡°ìƒì´ì§€ë§Œ ë¬¼ì†ì—ì„œ ì‚´ì•˜ì–´. ë•…ì´ ë„ˆë¬´ ê±´ì¡°í•´ì„œ ëª» ì˜¬ë¼ì™”ëŒ€."
            },
            {
                question: "ìµœì´ˆì˜ ìœ¡ìƒ ì‹ë¬¼ì¸ 'ì´ë¼'ëŠ” ëª¸ì´ ë§ˆë¥´ì§€ ì•Šê²Œ ë¹„ì˜·(íí‹°í´)ì„ ì…ì—ˆë‹¤?",
                answer: true,
                explanation: "ë§¨ëª¸ìœ¼ë¡œ ë‚˜ì˜¤ë©´ ë§ë¼ë²„ë¦¬ë‹ˆê¹Œ íˆ¬ëª… ë¹„ì˜·ë„ ì…ê³ , ìˆ¨ ì‰¬ëŠ” êµ¬ë©ë„ ë§Œë“¤ì–´ì„œ ë•… ìœ„ë¡œ ì˜¬ë¼ì™”ì–´."
            },
            {
                question: "ë•…ì— ì‚¬ëŠ” ì‹ë¬¼(ìœ ë°°ì‹ë¬¼)ì€ ìº¥ê±°ë£¨ì²˜ëŸ¼ ì•„ê¸°ë¥¼ ì—„ë§ˆ ëª¸ì†ì—ì„œ í‚¤ìš´ë‹¤?",
                answer: true,
                explanation: "ë§ì•˜ì–´! ì•„ê¸°(ë°°)ê°€ íŠ¼íŠ¼í•´ì§ˆ ë•Œê¹Œì§€ ì—„ë§ˆê°€ ê¼­ ì•ˆì•„ì„œ ë³´í˜¸í•´ ì¤˜. ê·¸ë˜ì„œ 'ìœ ë°°ì‹ë¬¼'ì´ë¼ê³  ë¶€ë¥¸ëŒ€!"
            }
        ];
        
        const THEME_EMOJI = "ğŸŒ¿"; 

        // --- ë¡œì§ (ìˆ˜ì •ëœ ë²„ì „) ---
        let currentState = { pageIndex: 0, quizIndex: 0, quizStatus: 'question', lastAnswer: null, inQuiz: false };
        const app = document.getElementById('app');

        function render() {
            app.innerHTML = ''; 
            
            // 1ìˆœìœ„: í€´ì¦ˆ ëª¨ë“œì¼ ê²½ìš° í€´ì¦ˆ ë Œë”ë§
            if (currentState.inQuiz) {
                renderQuiz();
                return;
            }

            // 2ìˆœìœ„: ìŠ¤í† ë¦¬ í˜ì´ì§€ (í‘œì§€, ë³¸ë¬¸, í€´ì¦ˆì¸íŠ¸ë¡œ, ì—”ë”©)
            if (currentState.pageIndex < storyData.length) {
                const page = storyData[currentState.pageIndex];
                if (page.type === 'cover') renderCover(page);
                else if (page.type === 'ending') renderEnding(page);
                else renderStoryPage(page, page.type === 'quiz_intro');
            } 
        }

        function renderCover(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = nextPage;
            div.innerHTML = `
                <div class="img-container"><img src="${data.image}" class="img-cover" alt="í‘œì§€" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-500\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'"></div>
                <div class="absolute bottom-10 w-full text-center text-white font-comic animate-pulse text-xl drop-shadow-md bg-black/20 py-2">í™”ë©´ì„ íƒ­í•˜ì—¬ ì‹œì‘í•˜ê¸°</div>
            `;
            app.appendChild(div);
        }

        function renderEnding(data) {
            const div = document.createElement('div');
            div.className = "w-full h-full relative cursor-pointer fade-in";
            div.onclick = restart;
            div.innerHTML = `
                <div class="img-container"><img src="${data.image}" class="img-cover" alt="ì—”ë”©" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-500\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'"></div>
                <div class="absolute bottom-10 w-full text-center text-white font-comic animate-pulse text-xl drop-shadow-md bg-black/20 py-2">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸° ğŸ”„</div>
            `;
            app.appendChild(div);
        }

        function renderStoryPage(data, isQuizIntro) {
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-white fade-in";
            const imgHtml = `<div class="flex-1 img-container relative border-b-4 border-orange-200"><img src="${data.image}" class="img-fit" alt="ì‚½í™”" onerror="this.parentElement.innerHTML='<div class=\\'flex flex-col items-center justify-center h-full text-gray-400\\'>ì´ë¯¸ì§€ ì¤€ë¹„ì¤‘<br>${data.image}</div>'"></div>`;
            
            const textHtml = `
                <div class="h-[33%] flex flex-col relative">
                    <div class="flex-1 p-6 overflow-y-auto text-box -mt-6 z-10 text-lg leading-relaxed text-gray-800">
                        ${data.title ? `<h2 class="font-comic text-2xl text-orange-500 mb-1">${data.title}</h2>` : ''}
                        ${data.sub ? `<p class="text-sm text-gray-500 mb-4">${data.sub}</p>` : ''}
                        <div class="space-y-2">${data.content}</div>
                    </div>
                    <div class="h-20 bg-white flex justify-between items-center px-8 border-t border-orange-100 z-20">
                        <div onclick="prevPage()" class="flex flex-col items-center cursor-pointer text-gray-400 hover:text-gray-600 transition"><span class="text-2xl opacity-60">âª</span><span class="text-xs font-bold mt-1">ì´ì „</span></div>
                        ${isQuizIntro ? 
                            `<div onclick="startQuiz()" class="cursor-pointer text-pink-500 flex flex-col items-center"><div class="w-14 h-14 bg-pink-500 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg border-4 border-pink-200">?</div><span class="text-xs font-bold mt-1">í€´ì¦ˆ í’€ê¸°!</span></div>` : 
                            `<div onclick="nextPage()" class="btn-theme flex flex-col items-center text-green-600"><span class="text-4xl filter drop-shadow-md">${THEME_EMOJI}</span><span class="text-xs font-bold mt-1 text-green-700">ë‹¤ìŒ</span></div>`
                        }
                    </div>
                </div>
            `;
            div.innerHTML = imgHtml + textHtml;
            app.appendChild(div);
        }

        function renderQuiz() {
            if (currentState.quizIndex >= quizData.length) { 
                currentState.inQuiz = false;
                currentState.pageIndex++; 
                render(); 
                return; 
            }

            const currentQ = quizData[currentState.quizIndex];
            const div = document.createElement('div');
            div.className = "w-full h-full flex flex-col bg-yellow-50 fade-in";
            
            if (currentState.quizStatus === 'question') {
                div.innerHTML = `<div class="flex-1 flex flex-col items-center justify-center p-6 text-center"><span class="text-pink-500 font-bold text-xl mb-4 bg-pink-100 px-4 py-1 rounded-full">ë¬¸ì œ ${currentState.quizIndex + 1} / 3</span><div class="bg-white p-8 rounded-2xl shadow-xl w-full mb-8 border-2 border-yellow-300"><p class="text-2xl font-bold break-keep text-gray-800">${currentQ.question}</p></div><div class="flex gap-6 justify-center"><button onclick="checkAnswer(true)" class="w-24 h-24 bg-blue-500 rounded-full text-white text-5xl font-black shadow-lg">O</button><button onclick="checkAnswer(false)" class="w-24 h-24 bg-red-500 rounded-full text-white text-5xl font-black shadow-lg">X</button></div></div>`;
            } else if (currentState.quizStatus === 'result') {
                const isCorrect = currentState.lastAnswer === currentQ.answer;
                const emoji = isCorrect ? `ğŸ‰${THEME_EMOJI}ğŸ‰` : 'ğŸ¤”ğŸ’¦';
                div.innerHTML = `<div class="w-full h-full ${isCorrect ? 'bg-green-500' : 'bg-orange-400'} flex flex-col items-center justify-center text-white cursor-pointer" onclick="showExplanation()"><div class="text-8xl mb-6 animate-bounce">${emoji}</div><h2 class="text-4xl font-comic mb-4">${isCorrect ? 'ì •ë‹µ!' : 'ë•¡!'}</h2><p class="animate-pulse">íƒ­í•˜ì—¬ í•´ì„¤ ë³´ê¸°</p></div>`;
            } else if (currentState.quizStatus === 'explanation') {
                const isLast = currentState.quizIndex === quizData.length - 1;
                div.innerHTML = `<div class="flex-1 flex flex-col p-6 bg-white cursor-pointer" onclick="nextQuizStep()"><div class="flex-1 flex flex-col justify-center items-center"><h3 class="text-2xl font-comic text-sky-600 mb-6">ğŸ‘§ğŸ» ìœ¨ì´ì˜ ì„¤ëª…</h3><div class="bg-sky-50 p-6 rounded-xl border-2 border-sky-200 shadow-md relative"><div class="absolute -top-4 -left-2 text-4xl">ğŸ’¡</div><p class="text-xl font-medium text-gray-800 leading-relaxed word-keep">"${currentQ.explanation}"</p></div></div><div class="h-24 flex items-center justify-center"><div class="btn-theme flex flex-col items-center"><span class="text-4xl">${THEME_EMOJI}</span><span class="text-sm font-bold text-green-600 mt-1">${isLast ? "ì™„ë£Œ!" : "ë‹¤ìŒ ë¬¸ì œ"}</span></div></div></div>`;
            }
            app.appendChild(div);
        }

        function nextPage() { 
            if (currentState.pageIndex < storyData.length - 1) { 
                currentState.pageIndex++; 
                render(); 
            }
        }
        function prevPage() { 
            if (currentState.pageIndex > 0) { 
                currentState.pageIndex--; 
                render(); 
            } 
        }
        function startQuiz() { 
            currentState.inQuiz = true;
            currentState.quizIndex = 0; 
            currentState.quizStatus = 'question'; 
            render(); 
        }
        function checkAnswer(ans) { currentState.lastAnswer = ans; currentState.quizStatus = 'result'; render(); }
        function showExplanation() { currentState.quizStatus = 'explanation'; render(); }
        function nextQuizStep() { currentState.quizIndex++; currentState.quizStatus = 'question'; render(); }
        function restart() { 
            currentState.pageIndex = 0; 
            currentState.quizIndex = 0; 
            currentState.inQuiz = false;
            render(); 
        }

        render();
    </script>
</body>
</html>
